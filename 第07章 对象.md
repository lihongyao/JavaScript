# æ¦‚è¿°

## ä»€ä¹ˆæ˜¯å¯¹è±¡ï¼Ÿ

åœ¨ JavaScriptï¼ˆJSï¼‰ä¸­ï¼Œå¯¹è±¡æ˜¯ä¸€ç§ **å¤åˆæ•°æ®ç±»å‹**ï¼Œç”¨äºå­˜å‚¨å’Œç»„ç»‡ **ç›¸å…³çš„æ•°æ®** å’Œ **åŠŸèƒ½**ã€‚å¯¹è±¡ç”± **å±æ€§ï¼ˆé”®å€¼å¯¹ï¼‰** å’Œ **æ–¹æ³•ï¼ˆå‡½æ•°ï¼‰** ç»„æˆï¼Œå¯ä»¥é€šè¿‡ **ç‚¹ç¬¦å·**ï¼ˆ`obj.prop`ï¼‰æˆ– **æ–¹æ‹¬å·**ï¼ˆ`obj['prop']`ï¼‰è®¿é—®ã€‚

å¯¹è±¡æ˜¯ **JS çš„æ ¸å¿ƒæ¦‚å¿µ**ï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„æ•°æ®ç±»å‹ã€‚å‡ ä¹æ‰€æœ‰æ•°æ®éƒ½å¯ä»¥è¢«è§†ä¸ºå¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œç°å®ä¸–ç•Œä¸­çš„ **äººã€è½¦ã€ä¹¦**ï¼Œä»¥åŠæ›´å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œå¦‚ **æ•°ç»„ã€å‡½æ•°**ï¼Œéƒ½å¯ä»¥ç”¨å¯¹è±¡è¡¨ç¤ºã€‚

JS æ”¯æŒ **é¢å‘å¯¹è±¡ç¼–ç¨‹**ï¼ˆOOPï¼Œå³ **O**bject **O**riented **P**rogrammingï¼‰ï¼Œè™½ç„¶ä¸åŒäºä¼ ç»Ÿçš„é¢å‘å¯¹è±¡è¯­è¨€ï¼ˆå¦‚ Javaã€C++ï¼‰ï¼Œä½†ä¾ç„¶å…·å¤‡å¼ºå¤§çš„ OOP èƒ½åŠ›ã€‚OOP çš„æ ¸å¿ƒæ€æƒ³æ˜¯å°† **ç°å®ä¸–ç•Œä¸­çš„å¤æ‚å…³ç³»æŠ½è±¡ä¸ºå¯¹è±¡**ï¼Œé€šè¿‡å¯¹è±¡ä¹‹é—´çš„åä½œå®Œæˆç¨‹åºé€»è¾‘ã€‚

## è¿‡ç¨‹å¼ç¼–ç¨‹ vs é¢å‘å¯¹è±¡ç¼–ç¨‹

| **ç¼–ç¨‹èŒƒå¼**                                         | **ç‰¹ç‚¹**                                                     |
| ---------------------------------------------------- | ------------------------------------------------------------ |
| **è¿‡ç¨‹å¼ç¼–ç¨‹ï¼ˆProcedural Programmingï¼‰**             | ä»£ç ç”±ä¸€ç³»åˆ—å‡½æ•°å’ŒæŒ‡ä»¤ç»„æˆï¼Œä¸»è¦å…³æ³¨ **æ‰§è¡Œè¿‡ç¨‹**ã€‚          |
| **é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOP, Object-Oriented Programmingï¼‰** | ä»£ç ç”±å¤šä¸ªå¯¹è±¡ç»„æˆï¼Œæ¯ä¸ªå¯¹è±¡å°è£…å±æ€§å’Œæ–¹æ³•ï¼Œå…³æ³¨ **å¯¹è±¡çš„è¡Œä¸ºå’Œåä½œ**ã€‚ |

### å¯¹è±¡çš„ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µ

1. **å¯¹è±¡æ˜¯ç°å®äº‹ç‰©çš„æŠ½è±¡**ï¼š  
   - ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ **åŠ¨ç‰©** æŠ½è±¡ä¸º `Animal` å¯¹è±¡ï¼Œæ¯ä¸ªåŠ¨ç‰©éƒ½æ˜¯ `Animal` çš„å®ä¾‹ã€‚
   - æ•°æ®åº“ã€ç½‘é¡µã€ç½‘ç»œè¿æ¥ç­‰ä¹Ÿå¯ä»¥æŠ½è±¡ä¸ºå¯¹è±¡ã€‚

2. **å¯¹è±¡æ˜¯ä¸€ä¸ªå°è£…å±æ€§å’Œæ–¹æ³•çš„å®¹å™¨**ï¼š
   - **å±æ€§ï¼ˆstateï¼‰**ï¼šè¡¨ç¤ºå¯¹è±¡çš„ **çŠ¶æ€**ï¼Œå¦‚ `color`ã€`size`ã€`name`ã€‚
   - **æ–¹æ³•ï¼ˆbehaviorï¼‰**ï¼šè¡¨ç¤ºå¯¹è±¡çš„ **è¡Œä¸º**ï¼Œå¦‚ `run()`ã€`jump()`ã€`speak()`ã€‚

---

## OOPï¼ˆé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼‰

### ä¸‰å¤§ç‰¹æ€§

1. **å°è£…**  
   - æ•°æ®å’Œæ“ä½œæ•°æ®çš„æ–¹æ³•ç»‘å®šåœ¨ä¸€èµ·ï¼Œ**éšè—å†…éƒ¨å®ç°**ï¼Œé˜²æ­¢å¤–éƒ¨ç›´æ¥è®¿é—®å’Œä¿®æ”¹æ•°æ®ã€‚  
   - ä¾‹å¦‚ï¼Œ`private` å˜é‡ä¸èƒ½è¢«å¤–éƒ¨ç›´æ¥è®¿é—®ï¼Œè€Œæ˜¯é€šè¿‡ `getter/setter` è®¿é—®ã€‚

2. **ç»§æ‰¿**  
   - å…è®¸æ–°ç±»ï¼ˆå­ç±»ï¼‰ç»§æ‰¿å·²æœ‰ç±»ï¼ˆçˆ¶ç±»ï¼‰çš„ **å±æ€§å’Œæ–¹æ³•**ï¼Œå‡å°‘ä»£ç é‡å¤ï¼Œæé«˜å¯ç»´æŠ¤æ€§ã€‚  
   - ä¾‹å¦‚ï¼Œ`Dog` ç»§æ‰¿ `Animal`ï¼Œè·å¾— `eat()` æ–¹æ³•ï¼ŒåŒæ—¶å¯ä»¥æ·»åŠ  `bark()`ã€‚

3. **å¤šæ€**  
   - åŒä¸€æ–¹æ³•å¯ä»¥å¯¹ä¸åŒå¯¹è±¡äº§ç”Ÿä¸åŒçš„è¡Œä¸ºï¼Œæé«˜ä»£ç çš„æ‰©å±•æ€§ã€‚  
   - ä¾‹å¦‚ï¼Œ`Animal.makeSound()` å¯ä»¥åœ¨ `Dog` é‡Œå®ç° `bark()`ï¼Œåœ¨ `Cat` é‡Œå®ç° `meow()`ã€‚

---

### é¢å‘å¯¹è±¡çš„å…­å¤§è®¾è®¡åŸåˆ™ï¼ˆSOLIDï¼‰

- **å•ä¸€èŒè´£åŸåˆ™**ï¼ˆSRPï¼Œ**S**ingle **R**esponsibility **P**rincipleï¼‰ï¼šä¸€ä¸ªç±»åªè´Ÿè´£ **å•ä¸€åŠŸèƒ½**ï¼Œé¿å…èŒè´£è¿‡å¤šã€‚
- **å¼€æ”¾å°é—­åŸåˆ™**ï¼ˆOCPï¼Œ**O**penï¼**C**lose **P**rincipleï¼‰ï¼š**å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­**ï¼Œå³æ–°å¢åŠŸèƒ½æ—¶ä¸ä¿®æ”¹åŸæœ‰ä»£ç ã€‚

- **é‡Œæ°æ›¿æ¢åŸåˆ™**ï¼ˆLSPï¼Œ**L**iskov **S**ubstitution **P**rincipleï¼‰ï¼š**å­ç±»å¿…é¡»èƒ½æ›¿æ¢çˆ¶ç±»**ï¼Œä¸ä¼šå½±å“ç¨‹åºè¡Œä¸ºã€‚
- **æ¥å£åˆ†ç¦»åŸåˆ™**ï¼ˆISPï¼Œ **I**nterface **S**egregation **P**rincipleï¼‰ï¼š**å…è‡ƒè‚¿çš„æ¥å£**ï¼Œåº”æ‹†åˆ†ä¸ºæ›´å°çš„æ¥å£ï¼Œè®©ç±»åªå®ç°è‡ªå·±éœ€è¦çš„éƒ¨åˆ†ã€‚

- **ä¾èµ–å€’ç½®åŸåˆ™**ï¼ˆDIPï¼Œ**D**ependency **I**nversion **P**rincipleï¼‰ï¼šé«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–åº•å±‚æ¨¡å—ï¼ŒäºŒè€…éƒ½åº”è¯¥ä¾èµ–äºæŠ½è±¡ã€‚

- **è¿ªç±³ç‰¹æ³•åˆ™**ï¼ˆLoDï¼Œ**L**aw **o**f **D**emeterï¼‰ï¼š**é™ä½å¯¹è±¡é—´è€¦åˆ**ï¼Œå¯¹è±¡åº”å°½é‡å°‘åœ°äº†è§£å…¶ä»–å¯¹è±¡çš„ç»†èŠ‚ã€‚

## æ€»ç»“

- **å¯¹è±¡æ˜¯ JS çš„æ ¸å¿ƒæ¦‚å¿µ**ï¼Œæ˜¯ä¸€ç»„ **å±æ€§ï¼ˆæ•°æ®ï¼‰å’Œæ–¹æ³•ï¼ˆè¡Œä¸ºï¼‰** çš„å°è£…ã€‚
- **OOP æä¾›ä¸‰å¤§ç‰¹æ€§ï¼ˆå°è£…ã€ç»§æ‰¿ã€å¤šæ€ï¼‰**ï¼Œè®©ä»£ç æ›´åŠ  **æ¨¡å—åŒ–ã€å¯å¤ç”¨ã€æ˜“ç»´æŠ¤**ã€‚
- **å…­å¤§è®¾è®¡åŸåˆ™ï¼ˆSOLIDï¼‰** å¸®åŠ©æˆ‘ä»¬è®¾è®¡ **é«˜å†…èšã€ä½è€¦åˆ** çš„ç³»ç»Ÿï¼Œæé«˜ä»£ç è´¨é‡ã€‚

# åˆ›å»ºå¯¹è±¡

## å¯¹è±¡å­—é¢é‡ *

å¯¹è±¡å­—é¢é‡æ˜¯æœ€ç›´è§‚ã€æœ€ç®€æ´çš„æ–¹å¼ä¹‹ä¸€ï¼Œé€‚ç”¨äºåˆ›å»ºå•ä¸ªå¯¹è±¡ã€‚

```javascript
const person = {
  name: 'å¼ ä¸‰',
  age: 32,
  showName() {
    console.log(this.name);
  }
};
```

**âœ… ä¼˜åŠ¿ï¼š**

- è¯­æ³•ç®€å•ï¼Œç›´è§‚æ˜“è¯»ã€‚

**âŒ ç¼ºé™·ï¼š**

- é€‚ç”¨äºå•ä¸ªå¯¹è±¡ï¼Œæ— æ³•å¤§è§„æ¨¡åˆ›å»ºå¤šä¸ªç›¸ä¼¼å¯¹è±¡ã€‚
- å…±äº«æ–¹æ³•ä¼šå¯¼è‡´å†—ä½™ï¼Œæµªè´¹å†…å­˜ï¼ˆæ¯ä¸ªå®ä¾‹éƒ½ä¼šæœ‰ä¸€ä»½ showName æ–¹æ³•ï¼‰ã€‚
- ä¸èƒ½è‡ªåŠ¨ç»§æ‰¿ prototypeï¼Œæ²¡æœ‰åŸå‹é“¾ä¼˜åŒ–ã€‚

## æ„é€ å‡½æ•°

æ„é€ å‡½æ•°å¯ä»¥æ‰¹é‡åˆ›å»ºå¯¹è±¡ï¼Œå¹¶ä¸”æ¯ä¸ªå®ä¾‹éƒ½ç‹¬ç«‹å­˜å‚¨è‡ªå·±çš„å±æ€§å’Œæ–¹æ³•ã€‚

```javascript
function Person(name, age) {
  this.name = name;
  this.age = age;
  this.showName = function () {
    console.log(this.name);
  };
}

const per1 = new Person('å¼ ä¸‰', 22);
const per2 = new Person('æå››', 28);
```

ä¸Šé¢ä»£ç ä¸­ï¼Œ**Person** å°±æ˜¯æ„é€ å‡½æ•°ï¼Œå®ƒæä¾›æ¨¡æ¿ï¼Œç”¨æ¥ç”Ÿæˆå¯¹è±¡å®ä¾‹ã€‚ä¸ºäº†ä¸æ™®é€šå‡½æ•°åŒºåˆ«ï¼Œæ„é€ å‡½æ•°åå­—çš„ç¬¬ä¸€ä¸ªå­—æ¯é€šå¸¸å¤§å†™ã€‚

æ„é€ å‡½æ•°çš„ç‰¹ç‚¹æœ‰ä¸¤ä¸ªã€‚

- å‡½æ•°ä½“å†…éƒ¨ä½¿ç”¨äº† `this` å…³é”®å­—ï¼Œä»£è¡¨äº†æ‰€è¦ç”Ÿæˆçš„å¯¹è±¡å®ä¾‹ã€‚
- ç”Ÿæˆå¯¹è±¡çš„æ—¶å€™ï¼Œå¿…éœ€ç”¨ `new` å‘½ä»¤è°ƒç”¨ `Person` å‡½æ•°ã€‚

**âœ… ä¼˜åŠ¿ï¼š**

- é€‚ç”¨äºæ‰¹é‡åˆ›å»ºå¯¹è±¡ï¼Œæ¯ä¸ªå®ä¾‹éƒ½ç‹¬ç«‹å­˜å‚¨å±æ€§å’Œæ–¹æ³•ã€‚

- instanceof å…³é”®å­—å¯ä»¥æ£€æŸ¥å¯¹è±¡æ˜¯å¦å±äºæŸä¸ªæ„é€ å‡½æ•°ã€‚

  ```js
  console.log(per1 instanceof Person); // true
  console.log(per2 instanceof Person); // true
  ```

**âŒ ç¼ºé™·ï¼š**

- æ¯ä¸ªå®ä¾‹éƒ½æœ‰è‡ªå·±çš„ showName æ–¹æ³•ï¼Œå ç”¨é¢å¤–çš„å†…å­˜ã€‚
- ä¸èƒ½å…±äº«æ–¹æ³•ï¼Œæ‰€æœ‰å®ä¾‹éƒ½ä¼šæœ‰å„è‡ªçš„ showNameï¼Œå¯¼è‡´å†…å­˜æµªè´¹ã€‚

## å·¥å‚æ¨¡å¼

å·¥å‚æ¨¡å¼ç”¨å‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå°è£…äº†å¯¹è±¡çš„åˆ›å»ºé€»è¾‘ã€‚

```javascript
function createPerson(name, age) {
  return {
    name,
    age,
    showName() {
      console.log(this.name);
    }
  };
}

const obj1 = createPerson('å¼ ä¸‰', 22);
const obj2 = createPerson('æå››', 28);
```

**âœ… ä¼˜åŠ¿ï¼š**

- é€‚ç”¨äºæ‰¹é‡åˆ›å»ºå¯¹è±¡ï¼Œé¿å…äº† new å…³é”®å­—çš„ä½¿ç”¨ã€‚
- ä»£ç æ›´åŠ ç›´è§‚ï¼Œæ˜“äºå°è£…ã€‚

**âŒ ç¼ºé™·ï¼š**

- ç”Ÿæˆçš„å¯¹è±¡æ²¡æœ‰ prototypeï¼Œä¸èƒ½å…±äº«æ–¹æ³•ã€‚

- instanceof æ— æ³•æ£€æµ‹å¯¹è±¡çš„ç±»å‹ã€‚

  ```js
  console.log(obj1 instanceof createPerson); // false
  ```

## Object.create()

Object.create() å…è®¸åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå¹¶ç»§æ‰¿å·²æœ‰å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚

```js
const person = {
  name: 'å¼ ä¸‰',
  age: 32,
  showName() {
    console.log(this.name);
  }
};

const otherPerson = Object.create(person);
otherPerson.job = 'å‰ç«¯å·¥ç¨‹å¸ˆ';

console.log(otherPerson.name); // å¼ ä¸‰ï¼ˆç»§æ‰¿è‡ª personï¼‰
console.log(otherPerson.job); // å‰ç«¯å·¥ç¨‹å¸ˆï¼ˆè‡ªå·±çš„å±æ€§ï¼‰
```

**âœ… ä¼˜åŠ¿ï¼š**

- å¯ä»¥åŸºäºå·²æœ‰å¯¹è±¡åˆ›å»ºæ–°å¯¹è±¡ï¼Œç»§æ‰¿å…¶å±æ€§å’Œæ–¹æ³•ã€‚
- é¿å…äº†æ„é€ å‡½æ•°çš„é¢å¤–è°ƒç”¨ã€‚

**âŒ ç¼ºé™·ï¼š**

- ç»§æ‰¿çš„å±æ€§æ— æ³•é€šè¿‡ Object.hasOwnProperty() æ£€æµ‹ã€‚
- ä¸æ”¯æŒ instanceof æ£€æµ‹ã€‚

## åŸå‹æ¨¡å¼

åœ¨ JavaScript ä¸­ï¼Œæ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ª prototype å±æ€§ï¼Œæ‰€æœ‰ new ç”Ÿæˆçš„å¯¹è±¡éƒ½ä¼šç»§æ‰¿ prototype ä¸Šçš„æ–¹æ³•ã€‚

```javascript
function Person() {}

Person.prototype.name = 'å¼ ä¸‰';
Person.prototype.age = 32;
Person.prototype.showName = function () {
  console.log(this.name);
};

const p1 = new Person();
const p2 = new Person();

console.log(p1.name); // å¼ ä¸‰
console.log(p2.name); // å¼ ä¸‰
p1.showName(); // å¼ ä¸‰
```

**âœ… ä¼˜åŠ¿ï¼š**

- å…±äº«æ–¹æ³•ï¼ŒèŠ‚çœå†…å­˜ï¼ˆæ‰€æœ‰å®ä¾‹å…±äº« showNameï¼‰ã€‚

- å…è®¸ instanceof æ£€æµ‹ç±»å‹ã€‚

  ```js
  console.log(p1 instanceof Person); // true
  ```

**âŒ ç¼ºé™·ï¼š**

- ä¸èƒ½åœ¨æ„é€ æ—¶ä¼ é€’å‚æ•°ã€‚

- æ‰€æœ‰å®ä¾‹å…±äº«åŒä¸€ä¸ªå±æ€§ï¼Œå¦‚æœä¿®æ”¹ Person.prototype.nameï¼Œæ‰€æœ‰å®ä¾‹éƒ½ä¼šå—å½±å“ã€‚

## æ··åˆæ¨¡å¼ï¼ˆæ„é€ å‡½æ•° + åŸå‹ï¼‰ *

```javascript
function Person(name, age) {
  this.name = name;
  this.age = age;
}

// æ–¹æ³•å®šä¹‰åœ¨åŸå‹ä¸Šï¼Œæ‰€æœ‰å®ä¾‹å…±äº«
Person.prototype.showName = function () {
  console.log(this.name);
};

const per1 = new Person('å¼ ä¸‰', 28);
const per2 = new Person('æå››', 29);
```

> æç¤ºï¼šåšæ³•æ˜¯å°†éœ€è¦ç‹¬ç«‹çš„å±æ€§æ–¹æ³•æ”¾å…¥æ„é€ å‡½æ•°ä¸­ï¼Œè€Œå¯ä»¥å…±äº«çš„éƒ¨åˆ†åˆ™æ”¾å…¥åŸå‹ä¸­ï¼Œè¿™æ ·åšå¯ä»¥æœ€å¤§é™åº¦èŠ‚çœå†…å­˜è€Œåˆä¿ç•™å¯¹è±¡å®ä¾‹çš„ç‹¬ç«‹æ€§ã€‚

**âœ… ä¼˜åŠ¿ï¼š**

- **å±æ€§å­˜å‚¨åœ¨å®ä¾‹ä¸Šï¼Œé¿å…å…±äº«å¯¼è‡´æ•°æ®æ±¡æŸ“**ã€‚

- **æ–¹æ³•å­˜å‚¨åœ¨ prototypeï¼ŒèŠ‚çœå†…å­˜**ã€‚

- **æ”¯æŒ instanceofï¼Œæœ‰æ›´å¥½çš„å¯¹è±¡åˆ†ç±»èƒ½åŠ›**ã€‚

  ```js
  console.log(per1 instanceof Person); // true
  console.log(per2 instanceof Person); // true
  ```

**âŒ ç¼ºé™·ï¼š**

- ä»£ç ç¨å¾®å¤æ‚ï¼Œéœ€è¦ç†è§£ prototypeã€‚

## æ€»ç»“ï¼šå“ªç§æ–¹å¼æ›´å¥½ï¼Ÿ

| æ–¹å¼                | æ˜¯å¦æ”¯æŒ `prototype` | é€‚ç”¨äºå•ä¸ªå¯¹è±¡ | é€‚ç”¨äºå¤šä¸ªå¯¹è±¡ | æ˜¯å¦å…±äº«æ–¹æ³• | é¢å¤–å†…å­˜å ç”¨ |
| ------------------- | -------------------- | -------------- | -------------- | ------------ | ------------ |
| **å¯¹è±¡å­—é¢é‡**      | âŒ                    | âœ…              | âŒ              | âŒ            | é«˜           |
| **æ„é€ å‡½æ•°**        | âœ…                    | âŒ              | âœ…              | âŒ            | é«˜           |
| **å·¥å‚æ¨¡å¼**        | âŒ                    | âœ…              | âœ…              | âŒ            | é«˜           |
| **Object.create()** | âœ…                    | âœ…              | âœ…              | âœ…            | ä½           |
| **åŸå‹æ¨¡å¼**        | âœ…                    | âŒ              | âœ…              | âœ…            | ä½           |
| **æ··åˆæ¨¡å¼**        | âœ…                    | âŒ              | âœ…              | âœ…            | ä½           |

## ğŸ”¥ æœ€ä½³å®è·µ

**æ¨èä½¿ç”¨** æ··åˆæ¨¡å¼ï¼ˆæ„é€ å‡½æ•° + åŸå‹ï¼‰ï¼š

- **å¯¹è±¡çš„å±æ€§å­˜å‚¨åœ¨å®ä¾‹ä¸Šï¼Œé˜²æ­¢æ•°æ®æ±¡æŸ“**ã€‚
- **å¯¹è±¡çš„æ–¹æ³•å­˜å‚¨åœ¨ prototypeï¼ŒèŠ‚çœå†…å­˜**ã€‚
- **å¯ä»¥ä½¿ç”¨ instanceof æ£€æµ‹å¯¹è±¡ç±»å‹**ã€‚

è¿™æ˜¯ä¸€ç§ **é«˜æ•ˆã€ä¼˜é›…ã€å¯æ‰©å±•** çš„åˆ›å»ºå¯¹è±¡æ–¹å¼ï¼ ğŸš€ğŸš€ğŸš€

# å±æ€§ä¸æ–¹æ³• *

## å±æ€§

åœ¨å¯¹è±¡ä¸­ï¼Œå˜é‡è¢«è®¤ä¸ºæ˜¯ **å±æ€§**ã€‚å±æ€§ç”¨äºæè¿°å¯¹è±¡ï¼Œä¾‹å¦‚ï¼Œåœ¨ç‹è€…è£è€€æ¸¸æˆä¸­ï¼Œä¸€ä¸ªè‹±é›„æœ‰ **åå­—** å’Œ **æŠ€èƒ½**ï¼š

```javascript
// 1ã€å¯¹è±¡å­—é¢é‡ï¼ˆé”®å€¼å¯¹ï¼‰
const hero = { name: 'æç™½', skill: 'é’è²å‰‘æ­Œ' };

// 2ã€ç‚¹è¯­æ³•
const hero = {};
hero.name = 'æç™½';
hero.skill = 'é’è²å‰‘æ­Œ';

// 3ã€è®¡ç®—å±æ€§åï¼ˆåŠ¨æ€å±æ€§åï¼‰
const key = 'skill';
const hero = {};
hero['name'] = 'æç™½';
hero[key] = 'é’è²å‰‘æ­Œ'; // ç­‰ä»·äº hero.skill = 'é’è²å‰‘æ­Œ'
```

**è®¿é—®å¯¹è±¡å±æ€§**ï¼Œä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼š

- **ç‚¹è¯­æ³•**: å¯¹è±¡.å±æ€§åï¼ˆå¦‚ hero.nameï¼‰
- **æ–¹æ‹¬å·è¯­æ³•**: å¯¹è±¡["å±æ€§å"]ï¼ˆå¦‚ hero["name"]ï¼‰

```js
console.log(hero.name); // æç™½
console.log(hero['skill']); // é’è²å‰‘æ­Œ
```

å¦‚æœå±æ€§åæ˜¯åŠ¨æ€çš„ï¼ˆä¾‹å¦‚å˜é‡å­˜å‚¨çš„å€¼ï¼‰ï¼Œå¿…é¡»ä½¿ç”¨ **æ–¹æ‹¬å·è¯­æ³•**ï¼š

```js
const attr = 'skill';
console.log(hero[attr]); // é’è²å‰‘æ­Œ
```

## æ–¹æ³•

åœ¨å¯¹è±¡ä¸­ï¼Œ**å‡½æ•°** è¢«ç§°ä¸º **æ–¹æ³•**ã€‚æ–¹æ³•è¡¨ç¤ºå¯¹è±¡çš„è¡Œä¸ºï¼Œä¾‹å¦‚ï¼Œä¸€è¾†æ±½è½¦å¯ä»¥ **åŠ é€Ÿ** æˆ– **å‡é€Ÿ**ï¼š

```javascript
const car = {
  // å±æ€§
  brand: 'æœ¬ç”°',
  color: 'çç ç™½',
  model: 'æ€åŸŸ',

  // æ–¹æ³•ï¼ˆES6 ç®€å†™ï¼‰
  speedUp() {
    console.log('æ­£åœ¨åŠ é€Ÿï¼');
  },
  slowDown() {
    console.log('æ­£åœ¨å‡é€Ÿï¼');
  },
};
```

è®¿é—®æ–¹æ³•çš„è¯­æ³•ä¸å±æ€§ç±»ä¼¼ï¼š

```js
car.speedUp();  // æ­£åœ¨åŠ é€Ÿï¼
car.slowDown(); // æ­£åœ¨å‡é€Ÿï¼
```

# å¯¹è±¡æ“ä½œ *

å¯¹äºæ•°æ®æ“ä½œæ¥è®²ï¼Œæ— éå°±æ˜¯å››ç§æ“ä½œâ€œå¢ã€åˆ ã€æ”¹ã€æŸ¥â€ï¼Œå¯¹äºå¯¹è±¡æ¥è®²ï¼š

1. â€œ**å¢**â€ å°±æ˜¯ä¸ºä¸€ä¸ªå¯¹è±¡æ–°å¢ä¸€ä¸ªä¹‹å‰ä¸å­˜åœ¨çš„å±æ€§åï¼Œç„¶åè¿›è¡Œèµ‹å€¼ï¼›

2. â€œ**æ”¹**â€ å°±æ˜¯å¯¹å¯¹è±¡å·²ç»å­˜åœ¨çš„å±æ€§åè¿›è¡Œé‡æ–°èµ‹å€¼ï¼Œè¾¾åˆ°ä¸€ä¸ªä¿®æ”¹åŸå§‹å¯¹è±¡çš„æ•ˆæœï¼›

3. â€œ**æŸ¥**â€ å°±æ˜¯ç®€å•åœ°é€šè¿‡å¯¹è±¡çš„å±æ€§åè®¿é—®å³å¯ï¼›

4.  â€œ**åˆ **â€ç¨å¾®æœ‰äº›ç‰¹æ®Šï¼Œéœ€è¦ç”¨åˆ°å…³é”®å­— â€œ`delete`â€ è¿›è¡Œæ“ä½œï¼›

æˆ‘ä»¬é€šè¿‡å®ä¾‹æ¥è¯´æ˜ï¼ŒåŸå¯¹è±¡å¦‚ä¸‹ï¼š

```javascript
var phone = {
  brand: 'åä¸º',
  model: 'P30 Pro',
  pubDate: '2019å¹´4æœˆ10æ—¥',
};

{ brand: 'åä¸º', model: 'P30 Pro', pubDate: '2019å¹´4æœˆ10æ—¥' }
```

**å¢**

```javascript
phone.postAddress = "ä¸Šæµ·ä¸œæ–¹ä½“è‚²ä¸­å¿ƒ";

{
  brand: 'åä¸º',
  model: 'P30 Pro',
  pubDate: '2019å¹´4æœˆ10æ—¥',
  postAddress: 'ä¸Šæµ·ä¸œæ–¹ä½“è‚²ä¸­å¿ƒ'
}
```

**åˆ **

```javascript
delete phone.postAddress; 

{ brand: 'åä¸º', model: 'P30 Pro', pubDate: '2019å¹´4æœˆ10æ—¥' }
```

**æ”¹**

```javascript
phone.pubDate = "2019å¹´4æœˆ11æ—¥";

{ brand: 'åä¸º', model: 'P30 Pro', pubDate: '2019å¹´4æœˆ11æ—¥' }
```

**æŸ¥**

```javascript
phone.model;
P30 Pro
```

# åŸå‹é“¾ *

åŸå‹é“¾æ˜¯ä¸€ç§æœºåˆ¶ï¼Œå®ƒå…è®¸å¯¹è±¡ç»§æ‰¿å¦ä¸€ä¸ªå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚æ¯ä¸ªjså¯¹è±¡éƒ½æœ‰ä¸€ä¸ªæŒ‡å‘å…¶åŸå‹çš„å†…éƒ¨é“¾æ¥ï¼Œè¿™ä¸ªåŸå‹ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœåœ¨å½“å‰å¯¹è±¡ä¸Šæ‰¾ä¸åˆ°æ‰€éœ€çš„å±æ€§æˆ–æ–¹æ³•ï¼Œå°±ä¼šåœ¨åŸå‹å¯¹è±¡ä¸ŠæŸ¥æ‰¾ï¼Œç›´åˆ°è¾¾åˆ°æœ€é¡¶å±‚çš„ Object.prototype å¯¹è±¡ã€‚

å¯ä»¥é€šè¿‡å°†å±æ€§å’Œæ–¹æ³•æ·»åŠ åˆ°åŸå‹å¯¹è±¡æ¥å®ç°jsä¸­çš„å¯¹è±¡ç»§æ‰¿ã€‚å½“ä½¿ç”¨è¯¥æ„é€ å‡½æ•°åˆ›å»ºæ–°å¯¹è±¡æ—¶ï¼Œå®ƒä»¬ä¼šè‡ªåŠ¨è·å–åŸå‹å¯¹è±¡ä¸Šçš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ã€‚åŒæ—¶ï¼Œå¯ä»¥é€šè¿‡æ›´æ”¹åŸå‹å¯¹è±¡æ¥åŠ¨æ€åœ°ä¿®æ”¹å’Œæ‰©å±•å¯¹è±¡çš„è¡Œä¸ºå’ŒåŠŸèƒ½ã€‚

åœ¨jsä¸­ï¼Œæ¯ä¸ªå®ä¾‹å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªç§æœ‰å±æ€§ï¼ˆç§°ä¹‹ä¸º`__proto__` ï¼‰æŒ‡å‘å®ƒçš„æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ï¼ˆ`prototype` ï¼‰ã€‚è¯¥åŸå‹å¯¹è±¡ä¹Ÿæœ‰ä¸€ä¸ªè‡ªå·±çš„åŸå‹å¯¹è±¡(`__proto__`) ï¼Œå±‚å±‚å‘ä¸Šç›´åˆ°ä¸€ä¸ªå¯¹è±¡çš„åŸå‹å¯¹è±¡ä¸º `null`ã€‚

æ ¹æ®å®šä¹‰ï¼Œ`null` æ²¡æœ‰åŸå‹ï¼Œå¹¶ä½œä¸ºè¿™ä¸ª**åŸå‹é“¾** ä¸­çš„æœ€åä¸€ä¸ªç¯èŠ‚ã€‚

```javascript
function Person(name, age) {
    this.name = name;
    this.age  = age;
}
var per = new Person("Admin", 28);
console.log(per.__proto__);  // Person.prototype
console.log(per.__proto__.__proto__);  // Object.prototype
console.log(per.__proto__.__proto__.__proto__); // null
```

![](IMGS/prototype-chain.png)

> æ³¨æ„ï¼š
>
> 1. **åªæœ‰å‡½æ•°æ‰æœ‰ `prototype`**ã€‚
> 2. `prototype` åŸå‹å¯¹è±¡åŒ…æ‹¬äº†å…±äº«çš„å±æ€§ã€æ–¹æ³•ä»¥åŠæ„é€ å‡½æ•°ã€‚
> 3. ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œ`per` å®ä¾‹å¯¹è±¡ï¼Œ`Person.prototype` åŸå‹å¯¹è±¡ï¼Œ`Person` æ„é€ å‡½æ•°ã€‚
> 4. `prototype.constructor`  æŒ‡å‘æ„é€ å‡½æ•°ã€‚
> 5. è°·æ­Œæµè§ˆå™¨ä¸­ `[[Prototype]]` è¡¨ç¤ºçš„æ˜¯åŸå‹é“¾ã€‚
> 6. æ–¹æ³•è°ƒç”¨ â†’ **å°±è¿‘åŸåˆ™**ï¼Œå³åŸå‹é“¾æœ€è¿‘ã€‚

æ‹“å±•ï¼šæ–¹æ³•è°ƒç”¨æµç¨‹

1. é¦–å…ˆä»å½“å‰å®ä¾‹æŸ¥æ‰¾è°ƒç”¨æ–¹æ³•æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨åˆ™è°ƒç”¨ï¼Œä¸å­˜åœ¨åˆ™é€šè¿‡åŸå‹é“¾å‘ä¸Šä¸€çº§æŸ¥æ‰¾ï¼›
2. ä¸Šä¸€çº§å¯¹è±¡å¦‚æœå­˜åœ¨è¯¥æ–¹æ³•ï¼Œåˆ™è°ƒç”¨ï¼Œä¸å­˜åœ¨åˆ™ç»§ç»­å‘ä¸ŠæŸ¥æ‰¾ï¼Œç›´åˆ°åŸå‹é“¾æœ«ç«¯ï¼Œå³ \_\_proto__ä¸ºnullï¼›
3. å¦‚æœæŸ¥åˆ°æœ€åéƒ½æ²¡æœ‰æ‰¾åˆ°è¯¥æ–¹æ³•ï¼Œæ§åˆ¶å°å°†æŠ›å‡º *xxx is not a function* çš„é”™è¯¯ï¼›

# å¯¹è±¡ç»§æ‰¿ *

![](./IMGS/extends.png)

## åŸå‹é“¾ç»§æ‰¿

**åŸç†ï¼š** é€šè¿‡å°†çˆ¶ç±»çš„å®ä¾‹ä½œä¸ºå­ç±»çš„åŸå‹å®ç°ç»§æ‰¿ã€‚

```javascript
// çˆ¶ç±»
function Person(name, age) {
  this.name = name;
  this.age = age;
}
Person.prototype.sayHello = function () {
  console.log('Hello!');
};

// å­ç±»
function Student(name) {
  this.name = name;
  this.major = 'è½¯ä»¶æŠ€æœ¯';
}

// ç»§æ‰¿ï¼Œå¿…é¡»åœ¨å­ç±»æ–¹æ³•å®šä¹‰ä¹‹å‰
Student.prototype = new Person('å¼ ä¸‰', 30);
Student.prototype.constructor = Student; // ä¿®æ­£ constructor æŒ‡å‘
Student.prototype.learn = function () {
  console.log('å­¦ä¹  JavaScriptï¼');
};

// æµ‹è¯•
var stu = new Student('æå››');
console.log(stu.name); // "æå››"ï¼ˆå­ç±»è¦†ç›–çˆ¶ç±»å±æ€§ï¼‰
console.log(stu.age); // 30ï¼ˆç»§æ‰¿çˆ¶ç±»å±æ€§ï¼‰
console.log(stu.major); // "è½¯ä»¶æŠ€æœ¯"ï¼ˆå­ç±»è‡ªå·±çš„å±æ€§ï¼‰
stu.sayHello(); // "Hello!"ï¼ˆç»§æ‰¿çˆ¶ç±»æ–¹æ³•ï¼‰
stu.learn(); // "å­¦ä¹  JavaScriptï¼"ï¼ˆå­ç±»è‡ªå·±çš„æ–¹æ³•ï¼‰
```

âœ… **ä¼˜ç‚¹ï¼š**

- ç»§æ‰¿äº†çˆ¶ç±»çš„æ–¹æ³•ï¼Œé¿å…äº†ä»£ç é‡å¤ã€‚

âŒ **ç¼ºç‚¹ï¼š**

- **æ‰€æœ‰å®ä¾‹å…±äº«å¼•ç”¨ç±»å‹å±æ€§ï¼Œä¿®æ”¹ä¼šå½±å“æ‰€æœ‰å­ç±»å®ä¾‹ã€‚**
- **æ— æ³•å‘çˆ¶ç±»æ„é€ å‡½æ•°ä¼ å‚ã€‚**

**é—®é¢˜ç¤ºä¾‹ï¼ˆå…±äº«å¼•ç”¨ç±»å‹é—®é¢˜ï¼‰**

```js
function Person() {
  this.hobbies = ['music', 'reading'];
}

function Student() {}

Student.prototype = new Person();

var stu1 = new Student();
var stu2 = new Student();

stu1.hobbies.push("game");
console.log(stu1.hobbies); // [ 'music', 'reading', 'game' ]
console.log(stu2.hobbies); // [ 'music', 'reading', 'game' ] âŒï¼ˆè¢«ä¿®æ”¹ï¼‰
```

## æ„é€ å‡½æ•°ç»§æ‰¿

**åŸç†ï¼š** åœ¨å­ç±»æ„é€ å‡½æ•°ä¸­è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œé¿å…å¼•ç”¨ç±»å‹å…±äº«é—®é¢˜ã€‚

ä»£ç ç¤ºä¾‹ï¼š

```javascript
function Person() {
  this.hobbies = ['music', 'reading'];
}

function Student(name) {
  Person.call(this); // ç»§æ‰¿çˆ¶ç±»å±æ€§
  this.name = name;
}

var stu1 = new Student("å¼ ä¸‰");
var stu2 = new Student("æå››");

stu1.hobbies.push("game");
console.log(stu1.hobbies); // [ 'music', 'reading', 'game' ]
console.log(stu2.hobbies); // [ 'music', 'reading' ]
```

âœ… **ä¼˜ç‚¹ï¼š**

- è§£å†³äº†åŸå‹é“¾ç»§æ‰¿ä¸­å…±äº«å¼•ç”¨ç±»å‹å±æ€§çš„é—®é¢˜ã€‚
- å¯ä»¥å‘çˆ¶ç±»ä¼ é€’å‚æ•°ã€‚

âŒ **ç¼ºç‚¹ï¼š**

- **æ— æ³•ç»§æ‰¿çˆ¶ç±»åŸå‹ä¸Šçš„æ–¹æ³•ï¼Œæ¯ä¸ªå­ç±»å®ä¾‹éƒ½æœ‰ç‹¬ç«‹çš„æ–¹æ³•ï¼Œå¯¼è‡´å‡½æ•°æ— æ³•å…±äº«ï¼Œå ç”¨æ›´å¤šå†…å­˜ã€‚**

```js
function Person() {
  this.sayHi = function () {
    console.log("Hi");
  };
}

function Student() {
  Person.call(this);
}

var stu1 = new Student();
var stu2 = new Student();

console.log(stu1);
console.log(stu2);
console.log(stu1.sayHi === stu2.sayHi);

StudentÂ {sayHi: Æ’}
StudentÂ {sayHi: Æ’}
false
```





```javascript
// -- çˆ¶ç±»
function Person(name) {
  this.name = name;
  this.sayHi = function() {
    console.log("Hi");
  }
}

// -- å­ç±»
function Student(name) {
  Person.call(this, name);
}

var stu1 = new Student("å¼ ä¸‰");
var stu2 = new Student("æå››");

console.log(stu1);
console.log(stu2);
console.log(stu1.sayHi === stu2.sayHi); // falseï¼ˆæ¯ä¸ªå®ä¾‹éƒ½æœ‰è‡ªå·±çš„ sayHiï¼‰

Student { name: 'å¼ ä¸‰', sayHi: [Function (anonymous)] }
Student { name: 'æå››', sayHi: [Function (anonymous)] }
false
```

## ç»„åˆç»§æ‰¿

**åŸç†ï¼š** ç»“åˆ **æ„é€ å‡½æ•°ç»§æ‰¿ï¼ˆç»§æ‰¿å±æ€§ï¼‰** + **åŸå‹é“¾ç»§æ‰¿ï¼ˆç»§æ‰¿æ–¹æ³•ï¼‰**ï¼Œè§£å†³ä¸¤è€…çš„ç¼ºé™·ã€‚

ä»£ç ç¤ºä¾‹ï¼š

```javascript
function Person(name) {
  this.name = name;
  this.hobbies = ['music', 'reading'];
}
Person.prototype.sayHi = function () {
  console.log('Hi!');
};

function Student(name) {
  Person.call(this, name); // ç»§æ‰¿å±æ€§
}
Student.prototype = Object.create(Person.prototype); // ç»§æ‰¿æ–¹æ³•
Student.prototype.constructor = Student; // ä¿®æ­£ constructor æŒ‡å‘

const stu1 = new Student("å¼ ä¸‰");
const stu2 = new Student("æå››");

stu1.hobbies.push("game");
console.log(stu1.hobbies); // [ 'music', 'reading', 'game' ]
console.log(stu2.hobbies); // [ 'music', 'reading' ]
console.log(stu1.sayHi === stu2.sayHi); // trueï¼ˆæ–¹æ³•å…±äº«ï¼‰
```

âœ… **ä¼˜ç‚¹ï¼š**

- **è§£å†³äº†æ„é€ å‡½æ•°ç»§æ‰¿çš„é—®é¢˜ï¼Œæ–¹æ³•å¯å¤ç”¨ã€‚**
- **é¿å…äº†åŸå‹é“¾ç»§æ‰¿çš„å…±äº«å¼•ç”¨ç±»å‹é—®é¢˜ã€‚**

âŒ **ç¼ºç‚¹ï¼š**

- **çˆ¶ç±»æ„é€ å‡½æ•°ä¼šè°ƒç”¨ä¸¤æ¬¡ï¼ˆä¸€æ¬¡åœ¨åŸå‹ä¸Šï¼Œä¸€æ¬¡åœ¨å®ä¾‹ä¸Šï¼‰ã€‚**

## åŸå‹å¼ç»§æ‰¿

**åŸç†ï¼š** ç›´æ¥åŸºäºæŸä¸ªå¯¹è±¡åˆ›å»ºæ–°å¯¹è±¡ï¼ˆæµ…æ‹·è´ï¼‰ã€‚

```js
const person = {
  name: 'å¼ ä¸‰',
  hobbies: ['music', 'reading'],
};

const stu = Object.create(person);
stu.name = 'æå››';
stu.hobbies.push('game');

console.log(person.hobbies); // [ 'music', 'reading', 'game' ] âŒï¼ˆå¼•ç”¨ç±»å‹è¢«ä¿®æ”¹ï¼‰
```

âœ… **ä¼˜ç‚¹ï¼š**

- ä»£ç ç®€å•ï¼Œç›´æ¥åˆ›å»ºå¯¹è±¡ã€‚

âŒ **ç¼ºç‚¹ï¼š**

- **å’ŒåŸå‹é“¾ç»§æ‰¿ä¸€æ ·ï¼Œå¼•ç”¨ç±»å‹ä¼šè¢«å…±äº«ã€‚**
- **æ— æ³•å‘çˆ¶ç±»æ„é€ å‡½æ•°ä¼ å‚ã€‚**

## å¯„ç”Ÿå¼ç»§æ‰¿

**åŸç†ï¼š** åœ¨ **åŸå‹å¼ç»§æ‰¿** çš„åŸºç¡€ä¸Šå¢å¼ºå¯¹è±¡ã€‚

```javascript
function createAnother(original) {
  const clone = Object.create(original); // é€šè¿‡è°ƒç”¨å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡
  clone.sayHi = function () {   // ä»¥æŸç§æ–¹å¼æ¥å¢å¼ºè¿™ä¸ªå¯¹è±¡
    console.log('Hi');
  };
  return clone; // è¿”å›è¿™ä¸ªå¯¹è±¡
}

const person = {
  name: 'Nicholas',
  colors: ['red', 'green', 'blue'],
};

var anotherPerson = createAnother(person);
anotherPerson.sayHi(); // "Hi"
```

âœ… **ä¼˜ç‚¹ï¼š**

- å¯ä»¥æ‰©å±•å¯¹è±¡ã€‚

âŒ **ç¼ºç‚¹ï¼š**

- ä¾ç„¶å­˜åœ¨å¼•ç”¨ç±»å‹å…±äº«é—®é¢˜ã€‚

## å¯„ç”Ÿç»„åˆç»§æ‰¿ï¼ˆæœ€ä½³ï¼‰

**åŸç†ï¼š** ç»“åˆ **æ„é€ å‡½æ•°ç»§æ‰¿ï¼ˆç»§æ‰¿å±æ€§ï¼‰** + **å¯„ç”Ÿå¼ç»§æ‰¿ï¼ˆç»§æ‰¿æ–¹æ³•ï¼‰**ï¼Œé¿å…ç»„åˆç»§æ‰¿è°ƒç”¨ä¸¤æ¬¡çˆ¶ç±»æ„é€ å‡½æ•°çš„é—®é¢˜ã€‚

ä»£ç ç¤ºä¾‹ï¼š

```js
function $extends(subType, superType) {
  subType.prototype = Object.create(superType.prototype); // ç»§æ‰¿æ–¹æ³•
  subType.prototype.constructor = subType; // ä¿®æ­£ constructor æŒ‡å‘
}

// çˆ¶ç±»
function Person(name) {
  this.name = name;
  this.hobbies = ['music', 'reading'];
}
Person.prototype.sayHi = function () {
  console.log('Hi!');
};

// å­ç±»
function Student(name, age) {
  Person.call(this, name); // ç»§æ‰¿å±æ€§
  this.age = age;
}

$extends(Student, Person);

var stu1 = new Student("å¼ ä¸‰", 23);
var stu2 = new Student("æå››", 23);
console.log(stu1.sayHi === stu2.sayHi); // trueï¼ˆæ–¹æ³•å…±äº«ï¼‰
```

âœ… **ä¼˜ç‚¹ï¼š**

- **é¿å…äº†ç»„åˆç»§æ‰¿çš„é‡å¤è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°é—®é¢˜ã€‚**

- **æ–¹æ³•å…±äº«ï¼ŒèŠ‚çœå†…å­˜ã€‚**

- **å¯ä»¥å‘çˆ¶ç±»ä¼ é€’å‚æ•°ã€‚**

âŒ **ç¼ºç‚¹ï¼š**

- æ— æ˜æ˜¾ç¼ºç‚¹ï¼Œæ˜¯ **æœ€æ¨èçš„ç»§æ‰¿æ–¹å¼ï¼**

## ES6 class ç»§æ‰¿ *

åŸç†ï¼š**æœ¬è´¨æ˜¯** **å¯„ç”Ÿç»„åˆç»§æ‰¿çš„è¯­æ³•ç³–ï¼** ğŸš€

```javascript
class A {}

class B extends A {
  constructor() {
    super();
  }
}
```

ä»£ç ç¤ºä¾‹ï¼š

```js
class Person {
  constructor(name) {
    this.name = name;
  }
  sayHi() {
    console.log('Hi!');
  }
}

class Student extends Person {
  constructor(name, age) {
    super(name);
    this.age = age;
  }
}

const stu = new Student("å¼ ä¸‰", 23);
stu.sayHi();
```

ES6å®ç°ç»§æ‰¿çš„å…·ä½“åŸç†ï¼š

```javascript
class A {}

class B {}

Object.setPrototypeOf = function (obj, proto) {
  obj.__proto__ = proto;
  return obj;
};

// B çš„å®ä¾‹ç»§æ‰¿ A çš„å®ä¾‹
Object.setPrototypeOf(B.prototype, A.prototype);

// B ç»§æ‰¿ A çš„é™æ€å±æ€§
Object.setPrototypeOf(B, A);
```

ES6ç»§æ‰¿ä¸ES5ç»§æ‰¿çš„å¼‚åŒï¼š
1ï¼‰ç›¸åŒç‚¹ï¼šæœ¬è´¨ä¸ŠES6ç»§æ‰¿æ˜¯ES5ç»§æ‰¿çš„è¯­æ³•ç³–
2ï¼‰ä¸åŒç‚¹ï¼š

- ES6ç»§æ‰¿ä¸­å­ç±»çš„æ„é€ å‡½æ•°çš„åŸå‹é“¾æŒ‡å‘çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼ŒES5ä¸­ä½¿ç”¨çš„æ˜¯æ„é€ å‡½æ•°å¤åˆ¶ï¼Œæ²¡æœ‰åŸå‹é“¾æŒ‡å‘ã€‚
- ES6å­ç±»å®ä¾‹çš„æ„å»ºï¼ŒåŸºäºçˆ¶ç±»å®ä¾‹ï¼ŒES5ä¸­ä¸æ˜¯ã€‚

# å¯¹è±¡çš„å¼•ç”¨ *

å¦‚æœä¸åŒçš„å˜é‡åæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå®ƒä»¬éƒ½æ˜¯è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´æŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€ã€‚ä¿®æ”¹å…¶ä¸­ä¸€ä¸ªå˜é‡ï¼Œä¼šå½±å“åˆ°å…¶ä»–æ‰€æœ‰å˜é‡ã€‚

```javascript
var car = {
	brand: "ä¸œé£æœ¬ç”°",
	model: "æ€åŸŸ",
	color: "çç ç™½"
};
var obj = car;
obj
// {brand: "ä¸œé£æœ¬ç”°", model: "æ€åŸŸ", color: "çç ç™½"}

obj.color = "ç‚«åŠ¨è“";

obj
// {brand: "ä¸œé£æœ¬ç”°", model: "æ€åŸŸ", color: "ç‚«åŠ¨è“"}
car
// {brand: "ä¸œé£æœ¬ç”°", model: "æ€åŸŸ", color: "ç‚«åŠ¨è“"}
```

å¦‚æœå–æ¶ˆæŸä¸€ä¸ªå˜é‡å¯¹åŸå¯¹è±¡çš„å¼•ç”¨ï¼Œä¸ä¼šå½±å“åˆ°å¦ä¸€ä¸ªå˜é‡ã€‚

```javascript
obj = null;
console.log(obj); // null
console.log(car); // { brand: 'ä¸œé£æœ¬ç”°', model: 'æ€åŸŸ', color: 'ç‚«åŠ¨è“' }
```

# æ•°æ®ç±»å‹åµŒå¥—ä½¿ç”¨ *

åœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸ä¼šé€šè¿‡ `ajax` å‘åå°æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œåå°æœåŠ¡å™¨ä¸€èˆ¬è¿”å› `json` æ•°æ®æ ¼å¼ï¼Œjson æ•°æ®æ ¼å¼çš„ç»“æ„å°±æ˜¯å¤šç§æ•°æ®ç±»å‹åµŒå¥—çš„ä¸€ç§å½¢å¼ï¼Œå¤–å±‚ä¸€èˆ¬æ˜¯å¯¹è±¡æˆ–æ•°ç»„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸ªç™»é™†æˆåŠŸè¿”å›çš„æ•°æ®å½¢å¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```js
var response = {
  status: 200,
  data: {
    username: 'lihy_online@163.com',
    age: 28,
    nikename: 'æœ¨å­æ',
    tel: '152-2888-5771',
    isVip: true,
    tags: ['IT', 'å‰ä»–', 'çƒ¹é¥ª', 'è€å¸æœº'],
  },
};
```

ä»ä¸Šè¿°ä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼Œreså¯¹è±¡é‡Œé¢å¯ä»¥åµŒå¥—å­—ç¬¦ä¸²ã€æ•°å€¼ã€æ•°ç»„ã€å¸ƒå°”å€¼ç”šè‡³è¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®é™…è¿”å›æ•°æ®å¯èƒ½æ¯”è¿™ä¸ªæ›´å¤æ‚ã€‚æˆ‘ä»¬è¦åšçš„äº‹æƒ…æ˜¯è¦å­¦ä¼šè¯»å–è¿™ç§å¤æ‚ç»“æ„ä¸‹çš„æ•°æ®ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦è®¿é—® â€è€å¸æœºâ€œï¼Œä»£ç å¦‚ä¸‹ï¼š

```javascript
res.data.tags[3]
```

åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»£ç ä¸­æ‰¾åˆ°è¯¥å¯¹è±¡ï¼Œåœ¨è¯¥å¯¹è±¡çš„åé¢è¾“å…¥ debuggerï¼Œæ‰“å¼€è°·æ­Œæµè§ˆå™¨ï¼Œé¼ æ ‡å³é”®ï¼Œåœ¨æ§åˆ¶å°è¿›è¡Œè°ƒè¯•å–å€¼ã€‚

# [Object](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object)

## [Object.defineProperty()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty)

æ•°æ®åŠ«æŒï¼šè¯¥æ–¹æ³•ä¼šç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°å±æ€§ï¼Œæˆ–è€…ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„ç°æœ‰å±æ€§ï¼Œ å¹¶è¿”å›è¿™ä¸ªå¯¹è±¡ã€‚

è¯­æ³•å½¢å¼å¦‚ä¸‹ï¼š

```javascript
Object.defineProperty(obj, prop, descriptor)
```

è¯­æ³•è§£è¯»ï¼š

- `obj`ï¼šæ“ä½œã€Œå¯¹è±¡ã€ã€‚
- `prop`ï¼šè¦å®šä¹‰æˆ–ä¿®æ”¹çš„ã€Œå±æ€§åç§°ã€ã€‚
- `descriptor`ï¼šå°†è¢«å®šä¹‰æˆ–ä¿®æ”¹çš„ã€Œå±æ€§æè¿°ç¬¦ã€

å¯¹è±¡å±æ€§ä¸€èˆ¬æ¥è¯´å¯ä»¥ä¿®æ”¹ä¹Ÿå¯ä»¥åˆ é™¤ï¼Œä½¿ç”¨ `Object.defineProperty()` å®šä¹‰å±æ€§ï¼Œé€šè¿‡æè¿°ç¬¦çš„è®¾ç½®å¯ä»¥è¿›è¡Œæ›´ç²¾å‡†çš„å¯¹è±¡å±æ€§æ§åˆ¶ã€‚

**# å±æ€§æè¿°ç¬¦**

å¯¹è±¡é‡Œç›®å‰å­˜åœ¨çš„å±æ€§æè¿°ç¬¦æœ‰ä¸¤ç§ä¸»è¦å½¢å¼ï¼š**æ•°æ®æè¿°ç¬¦** å’Œ **å­˜å–æè¿°ç¬¦**ï¼Œä¸€ä¸ªæè¿°ç¬¦åªèƒ½æ˜¯è¿™ä¸¤è€…å…¶ä¸­ä¹‹ä¸€ï¼›ä¸èƒ½åŒæ—¶æ˜¯ä¸¤è€…ã€‚

**â‘  æ•°æ®æè¿°ç¬¦**

| å±æ€§           | é»˜è®¤å€¼      | å±æ€§æè¿°                                                     |
| -------------- | ----------- | ------------------------------------------------------------ |
| `value`        | `undefined` | è¯¥å±æ€§å¯¹åº”çš„å€¼ã€‚å¯ä»¥æ˜¯ä»»ä½•æœ‰æ•ˆçš„ js å€¼ï¼ˆæ•°å€¼ï¼Œå¯¹è±¡ï¼Œå‡½æ•°ç­‰ï¼‰ã€‚ |
| `writable`     | `false`     | æ˜¯å¦å…è®¸èµ‹å€¼ï¼ˆobj.name=xxxï¼‰                                 |
| `configurable` | `false`     | æ˜¯å¦å…è®¸é…ç½®ï¼ˆæ”¹å˜å±æ€§çš„æè¿°ç¬¦ / å±æ€§æ˜¯å¦å¯ä»¥ä»å¯¹è±¡ä¸Šåˆ é™¤ `delete`ï¼‰ |
| `enumerable`   | `false`     | æ˜¯å¦å‡ºç°åœ¨å¯¹è±¡çš„æšä¸¾å±æ€§ä¸­                                   |

```js
var person = {};
Object.defineProperty(person, 'name', {
  value: 'å¼ ä¸‰', // å±æ€§å€¼
  writable: false, // æ˜¯å¦å¯ä¿®æ”¹ï¼Œé»˜è®¤ä¸ºfalse
});

person.name = 'æå››';
console.log(person.name); // å¼ ä¸‰
```

**â‘¡ å­˜å–æè¿°ç¬¦ï¼šsetã€get**

```js
let person = {
  desc: '',
};
Object.defineProperty(person, 'name', {
  get: function () {
    return 'å¼ ä¸‰';
  },
  set: function (value) {
    this.desc = 'æˆ‘æ˜¯' + value;
  },
});
console.log(person.name); // å¼ ä¸‰
person.name = 'æå››';
console.log(person.name); // å¼ ä¸‰
console.log(person.desc); // æˆ‘æ˜¯æå››
```

**# æ•°æ®æè¿°ç¬¦ä¸å­˜å–æè¿°å‡å¯ä½¿ç”¨çš„æè¿°ç¬¦**

1. `configrable`ï¼šæè¿°å±æ€§æ˜¯å¦é…ç½®ï¼Œä»¥åŠå¯å¦åˆ é™¤ã€‚
2. `enumerable` ï¼šæè¿°å±æ€§æ˜¯å¦ä¼šå‡ºç°åœ¨`for in` æˆ–è€… `Object.keys()` çš„éå†ä¸­ã€‚

## [Object.preventExtensions(obj)](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/preventExtensions)

ç¦æ­¢å¯¹è±¡æ‰©å±•å±æ€§ã€‚

```js
let person = {
  name: "å¼ ä¸‰",
};
Object.preventExtensions(person);

person.name = "æå››";
console.log(person); // {name: 'å¼ ä¸‰'}

person.job = "ç¨‹åºå‘˜"; 
console.log(person); // {name: 'å¼ ä¸‰'} -- æ‰©å±•å±æ€§å¤±è´¥
```

## Object.prototype.toString.call()

é€šè¿‡æ­¤æ–¹æ³•å¯ä»¥ç²¾ç¡®åŒ¹é…å¯¹è±¡ç±»å‹ï¼š

```js
function toRawType (target) {
  return Object.prototype.toString.call(target).slice(8, -1).toLowerCase();
}

console.log(toRawType([])); // array
console.log(toRawType({})); // object
console.log(toRawType("")); // string
console.log(toRawType(false)); // boolean
console.log(toRawType(0)); // number
console.log(toRawType(function(){})); // function
```

## [Object.seal(obj)](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/seal)

`Object.seal()` ä¼šåˆ›å»ºä¸€ä¸ªå¯†å°çš„å¯¹è±¡ï¼Œè¿™ä¸ªæ–¹æ³•å®é™…ä¸Šä¼šåœ¨ä¸€ä¸ªç°æœ‰å¯¹è±¡ä¸Šè°ƒç”¨ `object.preventExtensions()` å¹¶æŠŠæ‰€æœ‰ç°æœ‰å±æ€§æ ‡è®°ä¸º `configurable:false`ã€‚

```js
let person = {
  name: 'å¼ ä¸‰',
};

Object.seal(person);
person.age = 20;

console.log(person); // {name: 'å¼ ä¸‰'}
delete person.name;
console.log(person); // {name: 'å¼ ä¸‰'} -- åˆ é™¤å±æ€§nameå¤±è´¥
```

æ‰€ä»¥ï¼Œ å¯†å°ä¹‹åä¸ä»…ä¸èƒ½æ·»åŠ æ–°å±æ€§ï¼Œä¹Ÿä¸èƒ½é‡æ–°é…ç½®æˆ–è€…åˆ é™¤ä»»ä½•ç°æœ‰å±æ€§ï¼ˆè™½ç„¶å¯ä»¥æ”¹å±æ€§çš„å€¼ï¼‰ã€‚

## [Object.freeze(obj)](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze)

`Object.freeze()` ä¼šåˆ›å»ºä¸€ä¸ª **å†»ç»“** å¯¹è±¡ï¼Œè¿™ä¸ªæ–¹æ³•å®é™…ä¸Šä¼šåœ¨ä¸€ä¸ªç°æœ‰å¯¹è±¡ä¸Šè°ƒç”¨ `Object.seal()` ï¼Œå¹¶æŠŠæ‰€æœ‰ç°æœ‰å±æ€§æ ‡è®°ä¸º `writable: false`ï¼Œè¿™æ ·å°±æ— æ³•ä¿®æ”¹å®ƒä»¬çš„å€¼ã€‚

## [Obejct.entries(obj)](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/entries)

è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå…¶å…ƒç´ æ˜¯ä¸ç›´æ¥åœ¨`object`ä¸Šæ‰¾åˆ°çš„å¯æšä¸¾å±æ€§é”®å€¼å¯¹ç›¸å¯¹åº”çš„æ•°ç»„ã€‚å±æ€§çš„é¡ºåºä¸é€šè¿‡æ‰‹åŠ¨å¾ªç¯å¯¹è±¡çš„å±æ€§å€¼æ‰€ç»™å‡ºçš„é¡ºåºç›¸åŒã€‚

```js
var person = {
  name: 'å¼ ä¸‰',
  job: 'å‰ç«¯å·¥ç¨‹å¸ˆ',
  sex: 'ç”·',
};
for (var [key, value] of Object.entries(person)) {
  console.log(`${key}:${value}`);
}
name:å¼ ä¸‰
job:å‰ç«¯å·¥ç¨‹å¸ˆ
sex:ç”·
```

## [Object.assign()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)

`Object.assign()` æ–¹æ³•ç”¨äºå°†æ‰€æœ‰å¯æšä¸¾å±æ€§çš„å€¼ä»ä¸€ä¸ªæˆ–å¤šä¸ªæºå¯¹è±¡åˆ†é…åˆ°ç›®æ ‡å¯¹è±¡ã€‚å®ƒå°†è¿”å›ç›®æ ‡å¯¹è±¡ã€‚ç®€å•ç†è§£å°±æ˜¯åˆå¹¶å¯¹è±¡ï¼š

```javascript
var o1 = { name: 'å¼ ä¸‰' };
var o2 = { major: 'è½¯ä»¶æŠ€æœ¯', name: 'æå››' };

var result = Object.assign(o1, o2);

console.log(result); // {name: 'æå››', major: 'è½¯ä»¶æŠ€æœ¯'}
console.log(result === o1); // true
```

## [Object.keys()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/keys)

è·å–å¯¹è±¡æ‰€æœ‰çš„ `key`

## [Object.values()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/values)

è·å–å¯¹è±¡æ‰€æœ‰çš„ `value`

## [Object.create()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/create)

`Object.create()` æ–¹æ³•ç”¨äºåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä½¿ç”¨ç°æœ‰çš„å¯¹è±¡æ¥ä½œä¸ºæ–°åˆ›å»ºå¯¹è±¡çš„åŸå‹ï¼ˆ`prototype`ï¼‰ã€‚

## [Object.getOwnPropertyNames()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyNames)

è¿”å›ä¸€ä¸ªç”±æŒ‡å®šå¯¹è±¡çš„æ‰€æœ‰è‡ªèº«å±æ€§çš„å±æ€§åï¼ˆåŒ…æ‹¬ä¸å¯æšä¸¾å±æ€§ä½†ä¸åŒ…æ‹¬ Symbol å€¼ä½œä¸ºåç§°çš„å±æ€§ï¼‰ç»„æˆçš„æ•°ç»„ã€‚

# æ‹“å±•

## å¦‚ä½•åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ï¼Ÿ

åœ¨ JavaScript ä¸­ï¼Œ**å¯¹è±¡çš„æ¯”è¾ƒæ˜¯åŸºäºå¼•ç”¨åœ°å€çš„**ï¼Œå³ï¼š

```js
const obj1 = { name: 'å¼ ä¸‰' };
const obj2 = { name: 'å¼ ä¸‰' };

console.log(obj1 === obj2); // falseï¼ˆä¸åŒçš„å¯¹è±¡ï¼Œåœ°å€ä¸åŒï¼‰
console.log(Object.is(obj1, obj2)); // false
```

ä½†å¦‚æœä¸¤ä¸ªå¯¹è±¡ **å±æ€§å’Œå€¼éƒ½ç›¸ç­‰**ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä»¥ä¸‹æ–¹æ³•æ¥åˆ¤æ–­å®ƒä»¬æ˜¯å¦çœŸæ­£ç›¸ç­‰ã€‚

**æ–¹æ³• 1ï¼šä½¿ç”¨ Object.is()**

`Object.is()` åªèƒ½åˆ¤æ–­ **æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¼•ç”¨**ï¼š

```js
console.log(Object.is(obj1, obj1)); // true
console.log(Object.is(obj1, obj2)); // falseï¼ˆä¸åŒçš„å¯¹è±¡ï¼‰
```

**æ–¹æ³• 2ï¼šæ‰‹å†™æ·±åº¦æ¯”è¾ƒå‡½æ•°**

```js
function isEqual(obj1, obj2) {
  if (obj1 === obj2) return true; // å¼•ç”¨ç›¸åŒ
  if (typeof obj1 !== 'object' || typeof obj2 !== 'object' || obj1 == null || obj2 == null) return false;

  const keys1 = Object.keys(obj1);
  const keys2 = Object.keys(obj2);

  if (keys1.length !== keys2.length) return false;    // å±æ€§æ•°é‡ä¸åŒ

  for (let key of keys1) {
    if (!isEqual(obj1[key], obj2[key])) return false; // é€’å½’æ£€æŸ¥
  }

  return true;
}
```

**ç¤ºä¾‹**

```js
const a = { name: 'å¼ ä¸‰', info: { age: 18 } };
const b = { name: 'å¼ ä¸‰', info: { age: 18 } };
console.log(isEqual(a, b)); // true
```

**æ–¹æ³• 3ï¼šJSON.stringify()ï¼ˆæœ‰å±€é™æ€§ï¼‰**

```js
function isEqualJSON(obj1, obj2) {
  return JSON.stringify(obj1) === JSON.stringify(obj2);
}
```

âš  **é—®é¢˜**ï¼š

1. **å±æ€§é¡ºåºä¸åŒ** æ—¶ä¼šè¿”å› falseï¼Œä½† JavaScript å¯¹è±¡æœ¬è´¨ä¸Šæ˜¯æ— åºçš„ã€‚
2. **æ— æ³•æ­£ç¡®æ¯”è¾ƒå‡½æ•°**ã€Symbolã€undefined ç­‰å€¼ã€‚

## new æ“ä½œç¬¦å…·ä½“åšäº†ä»€ä¹ˆï¼Ÿ

å½“æˆ‘ä»¬ä½¿ç”¨ new æ“ä½œç¬¦åˆ›å»ºå¯¹è±¡æ—¶ï¼Œä¾‹å¦‚ï¼š

```js
function Person(name, age) {
  this.name = name;
  this.age = age;
}

const p = new Person('Alice', 30);
```

JS å†…éƒ¨ä¼šæ‰§è¡Œä»¥ä¸‹ **4 ä¸ªæ­¥éª¤**ï¼š

1. **åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡**ï¼šconst obj = {};

2. **å°†æ–°å¯¹è±¡çš„ __proto__ ç»‘å®šåˆ°æ„é€ å‡½æ•°çš„ prototype**ï¼š

   ```js
   obj.__proto__ = Person.prototype;
   ```

3. **æ‰§è¡Œæ„é€ å‡½æ•°ï¼Œå¹¶ç»‘å®š this åˆ°æ–°å¯¹è±¡**ï¼š

   ```js
   Person.call(obj, 'Alice', 30);
   ```

4. **å¦‚æœæ„é€ å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™è¿”å›è¯¥å¯¹è±¡ï¼Œå¦åˆ™è¿”å› obj**ã€‚

ç­‰ä»·äºï¼š

```js
function myNew(constructor, ...args) {
  const obj = Object.create(constructor.prototype);
  const result = constructor.apply(obj, args);
  return result instanceof Object ? result : obj;
}

const p1 = myNew(Person, 'Alice', 30);
console.log(p1.name); // Alice
```

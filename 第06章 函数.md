#  æ¦‚è¿°

[å‡½æ•° >>](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Functions) æ˜¯ JavaScript ä¸­çš„**å¯æ‰§è¡Œå€¼**ï¼Œå®ƒå°è£…äº†ä¸€æ®µå…·æœ‰**ç‹¬ç«‹ä½œç”¨åŸŸ**ã€å¯**é‡å¤æ‰§è¡Œ**çš„ä»£ç å—ã€‚

JavaScript ä½œä¸ºä¸€é—¨å…¼å…·**é¢å‘å¯¹è±¡**å’Œ**å‡½æ•°å¼ç¼–ç¨‹**ç‰¹æ€§çš„è¯­è¨€ï¼Œå‡½æ•°æ— ç–‘æ˜¯æ ¸å¿ƒå†…å®¹ä¹‹ä¸€ã€‚

# å‡½æ•°ç›¸å…³

## å‡½æ•°å®šä¹‰

JavaScript ä½¿ç”¨ function å…³é”®å­—å£°æ˜å‡½æ•°ï¼ŒåŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š

```javascript
function functionName(parameters) {
    // å‡½æ•°ä½“
    return value;
}
```

å‚æ•°è¯´æ˜ï¼š

- `function`ï¼šå®šä¹‰å‡½æ•°çš„å…³é”®å­—
- `functionName`ï¼šå‡½æ•°åå­—
- `parameters`ï¼šå‚æ•°åˆ—è¡¨ï¼Œå¤šä¸ªå‚æ•°ä»¥é€—å· , åˆ†éš”
- `return`ï¼šè¿”å›å€¼ï¼ˆå¯é€‰ï¼‰

**ç¤ºä¾‹**ï¼šå®šä¹‰ sum å‡½æ•°ï¼Œè®¡ç®—ä¸¤ä¸ªæ•°çš„å’Œå¹¶è¿”å›ç»“æœï¼š

```javascript
function sum(a, b) {
  return a + b;
}
```

## å‡½æ•°è°ƒç”¨

å®šä¹‰å‡½æ•°åï¼Œé™¤éæ˜¯**ç«‹å³æ‰§è¡Œå‡½æ•°**ï¼Œå¦åˆ™ä¸ä¼šè‡ªåŠ¨æ‰§è¡Œï¼Œå¿…é¡»æ‰‹åŠ¨è°ƒç”¨ã€‚

```javascript
// å®šä¹‰å‡½æ•°
function sayHi() {
	console.log("Hi");
}
// è°ƒç”¨å‡½æ•°
sayHi(); 
```

ä¸Šè¿°ä»£ç å®šä¹‰å‡½æ•°ä¹‹åï¼Œé€šè¿‡ `sayHi()` å¯¹å‡½æ•°è¿›è¡Œè°ƒç”¨ï¼Œæ§åˆ¶å°è¾“å‡º *â€˜Hiâ€™*ã€‚

> **æ³¨æ„**ï¼šå³ä½¿æ²¡æœ‰å‚æ•°ï¼Œè°ƒç”¨å‡½æ•°æ—¶ **åœ†æ‹¬å·ä¸å¯çœç•¥**ï¼Œå¦åˆ™ä¸ä¼šæ‰§è¡Œã€‚

## å‡½æ•°å‚æ•°

æˆ‘ä»¬åœ¨å¾ˆæ—©ä»¥å‰å°±å·²ç»æ¥è§¦è¿‡å‡½æ•°**å‚æ•°**äº†ï¼Œå®ƒ**æ˜¯è®©å‡½æ•°å¯å¤ç”¨çš„å…³é”®æ€§å­˜åœ¨**ã€‚å½“ç¨‹åºé‡Œå¾ˆå¤šåœ°æ–¹éƒ½åœ¨åšç€åŒæ ·ä¸€ä»¶äº‹ä»¶ï¼Œä½†åªæ˜¯éƒ¨åˆ†éœ€è¦å‘ˆç°çš„å†…å®¹ä¸åŒçš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨é…ç½®å‚æ•°çš„å½¢å¼æ¥å®Œæˆä¸€ä¸ªå‡½æ•°çš„åŠŸèƒ½ã€‚å¦‚åœ¨å­¦ä¹ JavaScriptä¹‹åˆï¼Œæˆ‘ä»¬å°±å·²ç»æ¥è§¦åˆ°çš„`alert()`å‡½æ•°å’Œ`console.log()`æ–¹æ³•ä¸€æ ·ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ä½¿ç”¨å®ƒä»¬çš„æ—¶å€™å¾€è¯¥å‡½æ•°æˆ–æ–¹æ³•çš„æ‹¬å·å†…æ·»åŠ æˆ‘ä»¬éœ€è¦æ˜¾ç¤ºçš„å†…å®¹å³å¯è®©å®ƒå®ç°å…¶åŠŸèƒ½ã€‚

### å‚æ•°å£°æ˜

JavaScript å‡½æ•°çš„å‚æ•°ï¼š

- **æ— éœ€å£°æ˜ç±»å‹**ï¼Œç±»å‹åœ¨è°ƒç”¨æ—¶ç”±ä¼ å…¥çš„å€¼å†³å®šã€‚
- **å¤šä¸ªå‚æ•°ä»¥é€—å· , åˆ†éš”**ï¼Œæ— éœ€ `var`/`const`/`let` ç­‰å…³é”®å­—ã€‚

```javascript
// å®šä¹‰å‡½æ•°
function sum(a, b) {
    return a + b;
}

// 2ã€è°ƒç”¨å‡½æ•°
var res = sum(5, 6);
```

### ä½œç”¨åŸŸ

å‡½æ•°å‚æ•°çš„**ä½œç”¨åŸŸ**ä»…é™äºå‡½æ•°å†…éƒ¨ï¼Œå¤–éƒ¨æ— æ³•è®¿é—®ï¼š

```javascript
function sum(a, b) {
    return a + b;
}
console.log(a); // ReferenceError: a is not defined
```

### å½¢å‚ä¸å®å‚

- **å½¢å‚ï¼ˆå½¢å¼å‚æ•°ï¼‰**ï¼šå‡½æ•°å®šä¹‰æ—¶çš„å‚æ•°ï¼Œæ²¡æœ‰ç¡®å®šçš„å€¼ã€‚

- **å®å‚ï¼ˆå®é™…å‚æ•°ï¼‰**ï¼šè°ƒç”¨å‡½æ•°æ—¶ä¼ å…¥çš„å…·ä½“å€¼ã€‚

```js
function greet(name) { 
    console.log("Hello, " + name);
}
greet("Alice"); // Hello, Alice
```

**æ³¨æ„**ï¼šå½¢å‚æ˜¯å®å‚çš„**æ‹·è´**ï¼Œå¯¹å½¢å‚çš„ä¿®æ”¹ä¸ä¼šå½±å“å¤–éƒ¨å˜é‡ã€‚

```javascript
var x = 0;
function test(n) {
	n++;
}
test(x)
console.log(x); // 0
```

ä¸Šè¿°ä¾‹å­ä¸­ï¼Œå‡½æ•°å¤–éƒ¨å®šä¹‰äº†å˜é‡ `x`ï¼Œåœ¨è°ƒç”¨**test**å‡½æ•°æ—¶ï¼Œå°†*x*ä½œä¸ºå®å‚ä¼ é€’ç»™å½¢å‚ `n`ï¼Œå‡½æ•°å†…éƒ¨ `n++`ï¼Œå˜é‡*x*çš„å€¼å¹¶æœªä¿®æ”¹ï¼Œä¾æ—§ä¸º `0`ã€‚

### é»˜è®¤å‚æ•°

åœ¨ ES5 åŠä¹‹å‰ï¼Œå¯ä»¥ä½¿ç”¨ **ä¸‰å…ƒè¿ç®—ç¬¦ï¼ˆ?:ï¼‰** æˆ– **é€»è¾‘æˆ– ï¼ˆ||ï¼‰** èµ‹é»˜è®¤å€¼ï¼š

```javascript
function print(str, num) {
    num = num === undefined ? 0 : num;
    str = str || "Hello, world!";
    console.log(str);
}
```

> **æç¤º**ï¼šæˆ–è¿ç®—ç¬¦åªå¯¹éæ•°å­—å¯¹è±¡æœ‰æ•ˆï¼Œå¦‚æœå‚æ•°ä¸ºæ•°å€¼ç±»å‹ï¼Œåˆ™ä½¿ç”¨ä¸‰å…ƒè¿ç®—ç¬¦ï¼Œå› ä¸ºå¦‚æœä¼ é€’çš„æ•°å­—ä¸º0ï¼Œæ ¹æ®è‡ªåŠ¨ç±»å‹è½¬æ¢ï¼Œ0è¢«è½¬æ¢ä¸ºfalseï¼Œå› æ­¤ä¹Ÿä¼šè®¤ä¸ºè¯¥å‚æ•°æ²¡æœ‰å€¼ã€‚

**ES6** å…è®¸ç›´æ¥åœ¨å‚æ•°åˆ—è¡¨ä¸­èµ‹é»˜è®¤å€¼ï¼š

```js
function sum(a = 0, b = 0) {
    return a + b;
}
console.log(sum()); // 0
console.log(sum(5)); // 5
console.log(sum(5, 6)); // 11
```

### ä¼ å‚æ–¹å¼

**1ï¸âƒ£ æŒ‰ä½ç½®ä¼ å‚**

å®å‚æŒ‰é¡ºåºå¯¹åº”å½¢å‚ï¼š

```js
function info(name, age, major) {
    console.log(`å§“åï¼š${name}ï¼Œå¹´é¾„ï¼š${age}ï¼Œä¸“ä¸šï¼š${major}`);
}

info("å°æ˜", 21, "è®¡ç®—æœºç§‘å­¦");
/*
è¾“å‡ºï¼šå§“åï¼šå°æ˜ï¼Œå¹´é¾„ï¼š21ï¼Œä¸“ä¸šï¼šè®¡ç®—æœºç§‘å­¦*/
```

**âš ï¸ æ³¨æ„**ï¼šå‚æ•°é¡ºåºé”™è¯¯ä¼šå¯¼è‡´æ„å¤–ç»“æœã€‚

**2ï¸âƒ£ å¯¹è±¡ä¼ å‚ï¼ˆæ¨èï¼‰**

ä½¿ç”¨**å¯¹è±¡**ä¼ é€’å‚æ•°ï¼Œå¯ä»¥çœç•¥å‚æ•°é¡ºåºï¼Œæé«˜å¯è¯»æ€§ï¼š

```js
function studentInfo({ name, age, major }) {
    console.log(`å§“åï¼š${name}ï¼Œå¹´é¾„ï¼š${age}ï¼Œä¸“ä¸šï¼š${major}`);
}

studentInfo({ major: "è®¡ç®—æœºç§‘å­¦", name: "å°æ˜", age: 21 });
/*
è¾“å‡ºï¼šå§“åï¼šå°æ˜ï¼Œå¹´é¾„ï¼š21ï¼Œä¸“ä¸šï¼šè®¡ç®—æœºç§‘å­¦*/
```

### arguments å¯¹è±¡

arguments æ˜¯ä¸€ä¸ª**ç±»æ•°ç»„å¯¹è±¡**ï¼ŒåŒ…å«æ‰€æœ‰ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°ï¼š

```javascript
function sum() {
    console.log(arguments);
}

sum(1, 2); 
sum(1, 2, 3);
```

âš ï¸ arguments ä¸èƒ½ç›´æ¥ä½¿ç”¨æ•°ç»„æ–¹æ³•ï¼Œå¦‚ map()ï¼Œä½†å¯ä»¥è½¬æ¢ä¸ºçœŸæ­£çš„æ•°ç»„ï¼š

```js
function sum() {
    var args = Array.prototype.slice.call(arguments);
    return args.reduce((pre, cur) => pre + cur, 0);
}

console.log(sum(1, 2, 3, 4)); // 10
```

**ES6 æ›¿ä»£æ–¹æ¡ˆ**ï¼šä½¿ç”¨**å‰©ä½™å‚æ•°** ...args

```js
function sum(...args) {
    return args.reduce((pre, cur) => pre + cur, 0);
}

console.log(sum(1, 2, 3, 4)); // 10
```

### å€¼ä¼ é€’ vs å¼•ç”¨ä¼ é€’

å‚æ•°ä¼ é€’åˆ†ä¸ºâ€œ**å€¼ä¼ é€’**â€ ä¸ â€œ**åœ°å€ä¼ é€’**â€ï¼Œ

- **å€¼ä¼ é€’ï¼ˆåŸºæœ¬ç±»å‹ï¼‰**ï¼šå‡½æ•°å†…éƒ¨ä¿®æ”¹ä¸ä¼šå½±å“å¤–éƒ¨å˜é‡ã€‚
- **å¼•ç”¨ä¼ é€’ï¼ˆå¯¹è±¡ç±»å‹ï¼‰**ï¼šå‡½æ•°å†…éƒ¨ä¿®æ”¹ä¼šå½±å“å¤–éƒ¨å˜é‡ã€‚

```javascript
// å€¼ä¼ é€’
var a = 10;
function changeValue(n) {
    n = 20;
}
changeValue(a);
console.log(a); // 10

// å¼•ç”¨ä¼ é€’
var obj = { value: 10 };
function changeReference(o) {
    o.value = 20;
}
changeReference(obj);
console.log(obj.value); // 20
```

## è¿”å›å€¼

return è¯­å¥ç»ˆæ­¢å‡½æ•°æ‰§è¡Œï¼Œå¹¶è¿”å›æŒ‡å®šå€¼ã€‚

å¦‚æœçœç•¥ returnï¼Œé»˜è®¤è¿”å› undefinedã€‚

```js
function getSkill() {
    return "ä½›å±±æ— å½±è„š";
}

console.log(getSkill()); // ä½›å±±æ— å½±è„š
```

âš ï¸ **return åçš„ä»£ç ä¸ä¼šæ‰§è¡Œ**ï¼š

```javascript
function getSkill() {
    return "ä½›å±±æ— å½±è„š";
    console.log("è¿™è¡Œä»£ç ä¸ä¼šæ‰§è¡Œ");
}
```

**return** å…³é”®å­—åå¯ä»¥æ˜¯å˜é‡ä¹Ÿå¯ä»¥æ˜¯è¡¨è¾¾å¼ï¼Œç”šè‡³å¯ä»¥æ˜¯æ•°ç»„æˆ–å¯¹è±¡ï¼Œåªè¦ç¬¦åˆJavaScriptåŸºæœ¬æ•°æ®ç±»å‹ï¼Œéƒ½å¯ä»¥è¿”å›ã€‚

```javascript
// 1ã€è¿”å›å€¼ä¸ºå˜é‡
function func_1() {
	var a = 10;
	return a;
}
// 2ã€è¿”å›å€¼ä¸ºè¡¨è¾¾å¼
function func_2() {
	var a = 10, b = 10;
	return a + b;
}
// 3ã€è¿”å›å€¼ä¸ºæ•°ç»„
function func_3() {
	return [1, 2, 3];
}
// 4ã€è¿”å›å€¼ä¸ºå¯¹è±¡
function func_4() {
	return {name:"Petter", age:23}
}
// 5ã€è¿”å›å€¼ä¸ºå¸ƒå°”ç±»å‹çš„å€¼
function func_5() {
	return true;
}
...
```

å‡½æ•°è¿”å›å€¼åªèƒ½æ˜¯ä¸€ä¸ªï¼Œä¸èƒ½æœ‰å¤šä¸ªè¿”å›å€¼ï¼Œå¦åˆ™ç¨‹åºæŠ¥é”™ï¼Œå¦‚æœè¦è¿”å›å¤šä¸ªå€¼ï¼Œå¯ä»¥ç”¨æ•°ç»„æˆ–å¯¹è±¡ã€‚

```javascript
// ä»¥æ•°ç»„å½¢å¼è¿”å›
function minAndMaxNumInArr(arr) {
	var min = Math.min(...arr), max = Math.max(...arr);
	return [min, max];
}

// ä»¥å¯¹è±¡å½¢å¼è¿”å›
function minAndMaxNumInArr(arr) {
	var min = Math.min(...arr), max = Math.max(...arr);
	return {min, max};
}
```

## å‡½æ•°æå‡

JavaScript **ä¼šæå‡å‡½æ•°å£°æ˜**ï¼Œå³å‡½æ•°å¯ä»¥åœ¨å®šä¹‰ä¹‹å‰è°ƒç”¨ï¼š

```javascript
sayHello(); // "Hello, world!"
function sayHello() {
	console.log("Hello, world!");
}
```

**ä½†å‡½æ•°è¡¨è¾¾å¼ä¸ä¼šè¢«æå‡**ï¼š

```js
f(); // TypeError: f is not a function

var f = function() {
    console.log("Hello");
};
```

ä¸Šé¢çš„ä»£ç ç­‰åŒäºä¸‹é¢çš„å½¢å¼ã€‚

```javascript
var f;
f();
f = function () {};
```

ä¸Šé¢ä»£ç ç¬¬äºŒè¡Œï¼Œè°ƒç”¨*f*çš„æ—¶å€™ï¼Œ*f*åªæ˜¯è¢«å£°æ˜äº†ï¼Œè¿˜æ²¡æœ‰è¢«èµ‹å€¼ï¼Œç­‰äº*undefined*ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™ã€‚

å¦‚æœå‡½æ•°åé‡å¤ï¼Œåˆ™åå®šä¹‰çš„å‡½æ•°ä¼šè¦†ç›–ä¹‹å‰å®šä¹‰çš„å‡½æ•°ã€‚

```javascript
function sayHello() {
	console.log("Hello, world!");
}
function sayHello() {
	console.log("Hello, China!");
}

sayHello(); // "Hello, China!"
```

## å‡½æ•°ç±»å‹

### å£°æ˜å¼å‡½æ•°

è¯­æ³•å½¢å¼ï¼š

```js
function <å‡½æ•°å>([å‚æ•°1, å‚æ•°2...]) {
	å‡½æ•°ä½“(ä¸šåŠ¡é€»è¾‘)
	return <è¿”å›å€¼>
}
```

### è¡¨è¾¾å¼å‡½æ•°

è¯­æ³•å½¢å¼ï¼š

```javascript
/*
var a = 10;
var a = function() {};*/

var function_name = function(arguments) {
	å‡½æ•°ä½“(ä¸šåŠ¡é€»è¾‘)
  return;
}
```

é€šè¿‡è¡¨è¾¾å¼å£°æ˜çš„å‡½æ•°éœ€è¦æ³¨æ„ä¸¤ç‚¹ï¼š

- **1ã€**è¿™æ ·å£°æ˜çš„å‡½æ•°ï¼Œéœ€è¦å…ˆå£°æ˜åè°ƒç”¨;
- **2ã€**è¡¨è¾¾å¼å†…éƒ¨çš„ **function** æ— éœ€å†è®¾ç½®å‡½æ•°åï¼Œå¦‚æœè¿™æ ·å†™ï¼Œfunctionåæ–¹çš„å‡½æ•°ååªèƒ½è¢«å‡½æ•°å†…éƒ¨è°ƒç”¨ï¼Œåœ¨å¤–éƒ¨æ˜¯æ— æ³•ä½¿ç”¨çš„;

é™¤äº†ä¸Šè¿°éœ€è¦æ³¨æ„çš„ä¸¤ç‚¹å¤–ï¼Œè¿™ç§æ–¹å¼å£°æ˜çš„å‡½æ•°å’Œåˆ©ç”¨funcitonå…³é”®å­—å®šä¹‰çš„å‡½æ•°å¹¶æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚

### å›è°ƒå‡½æ•°

åœ¨ js ä¸­ï¼Œå›è°ƒå‡½æ•°æ˜¯ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°ä¼ é€’çš„å‡½æ•°ã€‚å½“è¿™ä¸ªå‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼Œå®ƒä¼šè°ƒç”¨è¯¥å›è°ƒå‡½æ•°æ¥é€šçŸ¥ç»“æœã€‚å›è°ƒå‡½æ•°å¸¸ç”¨äºå¼‚æ­¥æ“ä½œä¸­ï¼Œä¾‹å¦‚åœ¨ç½‘ç»œè¯·æ±‚å®Œæˆåå¤„ç†è¿”å›çš„æ•°æ®ã€‚

ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾æœ‰ä¸€ä¸ªå‡½æ•° `doSomething` å®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªè¾“å…¥å€¼å’Œä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚è¯¥å‡½æ•°ä¼šå¯¹è¾“å…¥å€¼è¿›è¡Œè®¡ç®—å¹¶åœ¨è®¡ç®—å®Œæˆåè°ƒç”¨å›è°ƒå‡½æ•°ï¼Œå¹¶å°†è®¡ç®—ç»“æœä½œä¸ºå‚æ•°ä¼ å…¥å›è°ƒå‡½æ•°ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨å›è°ƒå‡½æ•°çš„ç¤ºä¾‹ä»£ç ï¼š

```js
function doSomething(input, callback) {
  // è®¡ç®— input çš„å¹³æ–¹
  const result = input * input;

  // è°ƒç”¨å›è°ƒå‡½æ•°ï¼Œå¹¶å°†è®¡ç®—ç»“æœä½œä¸ºå‚æ•°ä¼ å…¥
  callback(result);
}

// ä½¿ç”¨ doSomething å‡½æ•°ï¼Œå¹¶ä¼ å…¥å›è°ƒå‡½æ•°
doSomething(5, function(result) {
  console.log(result); // è¾“å‡º 25
});
```

åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä»£ç ä¸­ï¼Œæˆ‘ä»¬è°ƒç”¨äº† `doSomething` å‡½æ•°ï¼Œå¹¶ä¼ å…¥äº†ä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚å½“ `doSomething` å‡½æ•°è®¡ç®—å®Œæˆåï¼Œå®ƒä¼šè°ƒç”¨è¯¥å›è°ƒå‡½æ•°ï¼Œå¹¶å°†è®¡ç®—ç»“æœä½œä¸ºå‚æ•°ä¼ é€’ç»™å®ƒã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œé¡µé¢ä¸Šä¼šè¾“å‡º 25ï¼Œå› ä¸º 5 çš„å¹³æ–¹æ˜¯ 25ã€‚

### ç«‹å³æ‰§è¡Œå‡½æ•°ï¼ˆIIFEï¼‰

ç«‹å³æ‰§è¡Œå‡½æ•°è¯­æ³•å½¢å¼ä¸ºï¼š

```js
(function(){})()
```

ç”±äºå‡½æ•°è¢«åŒ…å«åœ¨ä¸€å¯¹ `( )` æ‹¬å·å†…éƒ¨ï¼Œå› æ­¤æˆä¸ºäº†ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œé€šè¿‡åœ¨æœ«å°¾åŠ ä¸Šå¦å¤–ä¸€ä¸ª `( )` å¯ä»¥ç«‹å³æ‰§è¡Œè¿™ä¸ªå‡½æ•°ã€‚è¿™ç§æ¨¡å¼å¾ˆå¸¸è§ï¼Œå‡ å¹´å‰ç¤¾åŒºç»™å®ƒè§„å®šäº†ä¸€ä¸ªæœ¯è¯­ï¼š**IIFE**ï¼Œä»£è¡¨ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼ï¼ˆ**I**mmediately **I**nvoked **F**unction **E**xpressionï¼‰ï¼›

è¿™ç§å‡½æ•°å£°æ˜æ–¹å¼çš„æœ€å¤§ç‰¹ç‚¹æ˜¯â€œå³æ—¶æ€§â€ã€‚å®ƒä¸éœ€è¦ä»»ä½•è°ƒç”¨ï¼Œå³å¯ç«‹å³æ‰§è¡Œã€‚ç«‹å³æ‰§è¡Œå‡½æ•°ä¸€èˆ¬æ— éœ€è®¾ç½®å‡½æ•°åã€‚å®ƒæ‰§è¡Œçš„åŸç†æ˜¯åˆ©ç”¨å°æ‹¬å·å°†å‡½æ•°è‡ªèº«æ‹¬èµ·æ¥ï¼Œä»¥åˆ°è¾¾æå‡æ‹¬å·å†…å‡½æ•°è¡¨è¾¾å¼ä¼˜å…ˆçº§çš„ä½œç”¨ï¼Œæ‹¬å·å†…éƒ¨çš„å‡½æ•°ç”Ÿæ•ˆåï¼Œåˆç´§æ¥ç€åé¢çš„æ‹¬å·è¿›è¡Œå‡½æ•°çš„è°ƒç”¨ï¼Œä»è€Œå®ç°è‡ªæˆ‘è°ƒç”¨çš„æ•ˆæœã€‚å¦‚ä¸‹ä¾‹ï¼š

```javascript
(function() {
	console.log("Hello, IIFE!"); // â†’ "Hello, IIFE!"
})();

(function(a, b) {
	return a + b;
})(1, 2);
// 3
```

è¿™ç§å‡½æ•°çš„å£°æ˜æ–¹å¼å’Œå…¶å®ƒå‡½æ•°çš„å£°æ˜æ–¹å¼ä¸€æ ·ï¼Œå®ƒä»ç„¶æœ‰è‡ªå·±çš„ç‹¬ç«‹ä½œç”¨åŸŸã€‚è‡ªè°ƒç”¨å‡½æ•°è¿˜æœ‰ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯ï¼Œå®ƒçš„è¿è¡Œè™½ç„¶è¿˜æ˜¯åœ¨ç¨‹åºçš„ç‹¬ç«‹çº¿ç¨‹å®Œæˆçš„ï¼Œä½†æ˜¯å´å¯ä»¥è¾¾åˆ°ç¨‹åºåœ¨ä¸»çº¿ç¨‹å®Œæˆçš„æ•ˆæœã€‚

### æ„é€ å‡½æ•°

æ„é€ å‡½æ•°æ˜¯ä¸€ç§ç‰¹æ®Šçš„å‡½æ•°ï¼Œç”¨äºåˆ›å»ºå¯¹è±¡å¹¶è®¾ç½®å…¶å±æ€§å’Œæ–¹æ³•ã€‚æ„é€ å‡½æ•°ä½¿ç”¨`new`å…³é”®å­—è°ƒç”¨ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„å¯¹è±¡å®ä¾‹ã€‚æ„é€ å‡½æ•°é€šå¸¸å…·æœ‰ä¸å…¶ç›¸å…³è”çš„åç§°ï¼Œå¹¶ä¸”ä½¿ç”¨å¤§å†™å­—æ¯å¼€å¤´ä»¥åŒºåˆ«äºæ™®é€šå‡½æ•°ã€‚

ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªåä¸º `Person` çš„æ„é€ å‡½æ•°ï¼š

```js
function Person(name, age) {
  this.name = name;
  this.age = age;
  
  this.sayHello = function() {
    const s = "";
    s += "Hello, my name is ";
    s += this.name;
    s += " and I am ";
    s += this.age;
    s += " years old.";
    console.log(s);
  }
}
```

é€šè¿‡ä½¿ç”¨`new`å…³é”®å­—ï¼Œå¯ä»¥ä½¿ç”¨è¯¥æ„é€ å‡½æ•°åˆ›å»ºæ–°çš„ `Person` å¯¹è±¡å®ä¾‹ï¼š

```js
const person1 = new Person("John", 30);
const person2 = new Person("Jane", 25);

person1.sayHello(); // è¾“å‡º "Hello, my name is John and I am 30 years old."
person2.sayHello(); // è¾“å‡º "Hello, my name is Jane and I am 25 years old."

```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`Person` æ„é€ å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•° `name` å’Œ `age`ï¼Œå¹¶å°†å®ƒä»¬åˆ†åˆ«å­˜å‚¨ä¸ºæ–°å¯¹è±¡çš„å±æ€§ã€‚æ­¤å¤–ï¼Œæ„é€ å‡½æ•°è¿˜å®šä¹‰äº†ä¸€ä¸ª `sayHello` æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¯ç”¨äºæ‰“å°å½“å‰äººå‘˜çš„åç§°å’Œå¹´é¾„ã€‚é€šè¿‡ä½¿ç”¨ `new` å…³é”®å­—åˆ›å»ºä¸¤ä¸ªæ–°çš„ `Person` å¯¹è±¡å®ä¾‹ï¼Œå¹¶å¯¹æ¯ä¸ªå¯¹è±¡è°ƒç”¨ `sayHello` æ–¹æ³•ï¼Œä»è€Œæ‰“å°å‡ºä¸åŒçš„è¾“å‡ºã€‚

## å°¾è°ƒç”¨

å‡½æ•°å°¾è°ƒç”¨æ˜¯æŒ‡åœ¨ä¸€ä¸ªå‡½æ•°çš„ **æœ€åä¸€æ­¥** è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶å°†å…¶è¿”å›å€¼ä½œä¸ºè‡ªå·±çš„è¿”å›å€¼ã€‚

å°¾è°ƒç”¨çš„ä¼˜åŠ¿ï¼š

1. é¿å…æµªè´¹å†…å­˜ï¼Œå› ä¸ºè°ƒç”¨æ ˆä¸­ä¸éœ€è¦ä¿å­˜å¤šä½™çš„è°ƒç”¨ä¿¡æ¯ã€‚
2. æœ‰åŠ©äºä¼˜åŒ–ä»£ç æ€§èƒ½ï¼ˆä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå°¾è°ƒç”¨åªèƒ½å‡ºç°åœ¨å‡½æ•°çš„æœ€åä¸€æ­¥ï¼Œå¦åˆ™æ— æ³•è¾¾åˆ°ä¼˜åŒ–çš„æ•ˆæœï¼‰

```javascript
function f(x){
	return g(x);
}
```

ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•° **f** çš„æœ€åä¸€æ­¥æ˜¯è°ƒç”¨å‡½æ•° **g**ï¼Œè¿™å°±å«å°¾è°ƒç”¨ã€‚ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼Œéƒ½ä¸å±äºå°¾è°ƒç”¨ã€‚

```javascript
// æƒ…å†µä¸€
function f(x) {
	var y = g(x);
	return y;
}

// æƒ…å†µäºŒ
function f(x){
	return g(x) + 1;
}

// æƒ…å†µä¸‰
function f(x){
	g(x);
}
```

ä¸Šé¢ä»£ç ä¸­ï¼Œæƒ…å†µä¸€æ˜¯è°ƒç”¨å‡½æ•°gä¹‹åï¼Œè¿˜æœ‰èµ‹å€¼æ“ä½œï¼Œæ‰€ä»¥ä¸å±äºå°¾è°ƒç”¨ï¼Œå³ä½¿è¯­ä¹‰å®Œå…¨ä¸€æ ·ã€‚æƒ…å†µäºŒä¹Ÿå±äºè°ƒç”¨åè¿˜æœ‰æ“ä½œï¼Œå³ä½¿å†™åœ¨ä¸€è¡Œå†…ã€‚æƒ…å†µä¸‰ç­‰åŒäºä¸‹é¢çš„ä»£ç ã€‚

```javascript
function f(x){
	g(x);
	return undefined;
}
```

å°¾è°ƒç”¨ä¸ä¸€å®šå‡ºç°åœ¨å‡½æ•°å°¾éƒ¨ï¼Œåªè¦æ˜¯æœ€åä¸€æ­¥æ“ä½œå³å¯ã€‚

```javascript
function f(x) {
	if (x > 0) {
		return m(x);
	}
	return n(x);
}
```

ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°må’Œnéƒ½å±äºå°¾è°ƒç”¨ï¼Œå› ä¸ºå®ƒä»¬éƒ½æ˜¯å‡½æ•°fçš„æœ€åä¸€æ­¥æ“ä½œã€‚

# é—­åŒ…

## æ¦‚å¿µ

é—­åŒ…æ˜¯ JavaScript è¯æ³•ä½œç”¨åŸŸçš„è‡ªç„¶äº§ç‰©ã€‚ç®€å•æ¥è¯´ï¼š**é—­åŒ…æ˜¯ä¸€ä¸ªèƒ½å¤Ÿè®¿é—®å¤–éƒ¨å‡½æ•°å˜é‡çš„å‡½æ•°ï¼Œä½¿å¾—è¯¥å‡½æ•°ä½œç”¨åŸŸä¸ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶ï¼ˆGCï¼‰å›æ”¶ã€‚**

åªè¦å‡½æ•°èƒ½å¤Ÿâ€œè®°ä½â€è‡ªå·±åˆ›å»ºæ—¶çš„ä½œç”¨åŸŸï¼Œå³ä½¿åœ¨è¯¥ä½œç”¨åŸŸä¹‹å¤–æ‰§è¡Œï¼Œä¹Ÿç®—æ˜¯é—­åŒ…ã€‚

**ç¤ºä¾‹ 1ï¼šåŸºæœ¬é—­åŒ…**

```javascript
function foo() {
  var a = 2;
  function bar() {
    console.log(a); // â†’ 2
  }
  bar();
}
foo();
```

åœ¨ `bar()` å†…éƒ¨è®¿é—® `a`ï¼Œè¿™æ˜¯è¯æ³•ä½œç”¨åŸŸçš„åŸºæœ¬ä½“ç°ã€‚ä½†å¦‚æœ `bar()` åœ¨ `foo()` å¤–éƒ¨æ‰§è¡Œå‘¢ï¼Ÿ

**ç¤ºä¾‹ 2ï¼šçœŸæ­£çš„é—­åŒ…**

```js
function foo() {
  var a = 2;
  function bar() {
    console.log(a);
  }
  return bar; // è¿”å› bar å‡½æ•°
}

var baz = foo(); // è°ƒç”¨ foo å¹¶è¿”å› bar
baz(); // â†’ 2ï¼ˆé—­åŒ…ç”Ÿæ•ˆï¼‰
```

è¿™é‡Œ bar ä½œä¸ºè¿”å›å€¼ç¦»å¼€äº† foo() ä½œç”¨åŸŸï¼Œä½†ä»ç„¶å¯ä»¥è®¿é—® aï¼Œå› ä¸º bar å½¢æˆäº†é—­åŒ…ï¼ŒæŒæœ‰ foo() ä½œç”¨åŸŸçš„å¼•ç”¨ï¼ˆ*è¿™ä¸ªå¼•ç”¨å°±å«ä½œ **é—­åŒ…***ï¼‰ï¼Œé˜²æ­¢å…¶è¢«é”€æ¯ã€‚

æ— è®ºé€šè¿‡ä½•ç§æ‰‹æ®µå°†å†…éƒ¨å‡½æ•°ä¼ é€’åˆ°æ‰€åœ¨çš„è¯æ³•ä½œç”¨åŸŸä»¥å¤–ï¼Œå®ƒéƒ½ä¼šæŒæœ‰å¯¹åŸå§‹å®šä¹‰ä½œç”¨åŸŸçš„å¼•ç”¨ï¼Œæ— è®ºåœ¨ä½•å¤„æ‰§è¡Œè¿™ä¸ªå‡½æ•°éƒ½ä¼šä½¿ç”¨é—­åŒ…ã€‚

## é—­åŒ…çš„å·¥ä½œåŸç†

### ä½œç”¨åŸŸé“¾

åœ¨ JavaScript ä¸­ï¼Œæ¯ä¸ªå‡½æ•°éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸï¼Œå†…éƒ¨å‡½æ•°å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°çš„å˜é‡ã€‚è¿™ç§â€œåµŒå¥—â€è®¿é—®å½¢æˆäº†**ä½œç”¨åŸŸé“¾**ã€‚

```js
function outer() {
  var name = "Closure";
  function inner() {
    console.log(name); // è®¿é—®å¤–éƒ¨ä½œç”¨åŸŸå˜é‡
  }
  return inner;
}

var fn = outer(); // è¿è¡Œ outerï¼Œè¿”å› inner
fn(); // â†’ "Closure"ï¼ˆé—­åŒ…ç”Ÿæ•ˆï¼‰
```

fn æŒæœ‰ inner å‡½æ•°çš„å¼•ç”¨ï¼Œè€Œ inner ä¿ç•™äº† outer ä½œç”¨åŸŸçš„è®¿é—®æƒé™ï¼Œå› æ­¤ name å˜é‡ä¸ä¼šè¢«å›æ”¶ã€‚

### é—­åŒ…çš„å¸¸è§åº”ç”¨

**â‘  åœ¨ setTimeout ä¸­ä½¿ç”¨é—­åŒ…**

```js
function wait(message) {
  setTimeout(function timer() {
    console.log(message);
  }, 1000);
}

wait("Hello, closure!");
```

å›è°ƒ timer æŒæœ‰ wait ä½œç”¨åŸŸçš„é—­åŒ…ï¼Œå› æ­¤å³ä½¿ wait æ‰§è¡Œå®Œæ¯•ï¼Œmessage ä»ç„¶å¯ä»¥è¢«è®¿é—®ã€‚

**â‘¡ åœ¨äº‹ä»¶ç›‘å¬å™¨ä¸­ä½¿ç”¨é—­åŒ…**

```js
function setupBot(name, selector) {
  document.querySelector(selector).addEventListener("click", function () {
    console.log("Activating: " + name);
  });
}

setupBot("Closure Bot 1", "#bot_1");
setupBot("Closure Bot 2", "#bot_2");
```

ç‚¹å‡»ä¸åŒçš„ buttonï¼Œä¼šè¾“å‡ºå¯¹åº” nameï¼Œå› ä¸º click äº‹ä»¶å›è°ƒæŒæœ‰ setupBot çš„é—­åŒ…ã€‚

## å¾ªç¯å’Œé—­åŒ…

### é—­åŒ…é™·é˜±ï¼šå¾ªç¯ä¸­çš„ var

```js
for (var i = 1; i <= 5; i++) {
  setTimeout(function timer() {
    console.log(i);
  }, i * 1000);
}
```

**é¢„æœŸ**ï¼šæ¯ç§’è¾“å‡º 1 2 3 4 5

**å®é™…**ï¼šæ¯ç§’è¾“å‡º 6 6 6 6 6

**ä¸ºä»€ä¹ˆï¼Ÿ**

å› ä¸º setTimeout çš„å›è°ƒåœ¨å¾ªç¯ç»“æŸåæ‰æ‰§è¡Œï¼Œè€Œ i å·²ç»å˜æˆ 6ï¼Œæ‰€æœ‰ timer å…±äº«åŒä¸€ä¸ª iã€‚

### è§£å†³æ–¹æ¡ˆ 1ï¼šä½¿ç”¨ IIFE

```js
for (var i = 1; i <= 5; i++) {
  (function (j) {
    setTimeout(function timer() {
      console.log(j);
    }, j * 1000);
  })(i);
}
```

**åŸç†**ï¼šæ¯æ¬¡è¿­ä»£ IIFE ç«‹å³æ‰§è¡Œï¼Œj ä½œä¸ºå‚æ•°ä¿å­˜äº†å½“å‰ i çš„å€¼ã€‚

### è§£å†³æ–¹æ¡ˆ 2ï¼šä½¿ç”¨ let

```js
for (let i = 1; i <= 5; i++) {
  setTimeout(function timer() {
    console.log(i);
  }, i * 1000);
}
```

**ä¸ºä»€ä¹ˆæœ‰æ•ˆï¼Ÿ**

å› ä¸º let å…·æœ‰**å—çº§ä½œç”¨åŸŸ**ï¼Œæ¯æ¬¡è¿­ä»£ i éƒ½æ˜¯æ–°çš„å˜é‡ï¼Œå› æ­¤ä¸ä¼šè¢«è¦†ç›–ã€‚

## å°ç»“

1. **ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ**

**é—­åŒ…ï¼ˆClosureï¼‰** æŒ‡çš„æ˜¯ **å‡½æ•°å¯ä»¥â€œè®°ä½â€å®ƒåˆ›å»ºæ—¶çš„ä½œç”¨åŸŸï¼Œå³ä½¿åœ¨å¤–éƒ¨æ‰§è¡Œï¼Œä¹Ÿèƒ½è®¿é—®è¯¥ä½œç”¨åŸŸçš„å˜é‡**ã€‚

2. **é—­åŒ…çš„ä¸¤ä¸ªæ ¸å¿ƒç‰¹æ€§**
   - **å°é—­æ€§**ï¼šé—­åŒ…æä¾›æ•°æ®çš„ç§å¯†æ€§ï¼Œå¤–éƒ¨æ— æ³•ç›´æ¥è®¿é—®é—­åŒ…å†…éƒ¨çš„å˜é‡ï¼Œé™¤éé—­åŒ…ä¸»åŠ¨æä¾›è®¿é—®æ¥å£ã€‚
   - **æŒä¹…æ€§**ï¼šé—­åŒ…å¯ä»¥ä¿æŒå…¶åˆ›å»ºæ—¶çš„ä½œç”¨åŸŸï¼Œé˜²æ­¢å…¶è¢«åƒåœ¾å›æ”¶ï¼Œä»è€Œç»´æŒæ•°æ®çš„æŒä¹…åŒ–ã€‚

3. **é—­åŒ…çš„ä¼˜åŠ¿**
   - **è®¿é—®å‡½æ•°å†…éƒ¨å˜é‡**ï¼šé—­åŒ…å…è®¸åœ¨å¤–éƒ¨è®¿é—®å‡½æ•°å†…éƒ¨çš„å˜é‡ï¼Œä½¿å˜é‡çš„ä½œç”¨åŸŸä¸å±€é™äºå‡½æ•°å†…éƒ¨ã€‚
   - **ä¿æŠ¤å˜é‡ï¼Œé¿å…æ±¡æŸ“**ï¼šé—­åŒ…å¯ä»¥åˆ›å»ºç§æœ‰å˜é‡ï¼Œé¿å…å…¨å±€ä½œç”¨åŸŸçš„æ±¡æŸ“ï¼Œæé«˜ç¨‹åºçš„å®‰å…¨æ€§ã€‚
   - **å°è£…ç§æœ‰å˜é‡å’Œæ–¹æ³•**ï¼šå¯ä»¥åˆ©ç”¨é—­åŒ…æ¨¡æ‹Ÿç±»çš„ç§æœ‰æˆå‘˜ï¼Œå¢å¼ºæ•°æ®çš„å°è£…æ€§ã€‚
   - **å»¶é•¿å˜é‡ç”Ÿå‘½å‘¨æœŸ**ï¼šå˜é‡ä¸ä¼šå› ä¸ºå‡½æ•°æ‰§è¡Œå®Œæ¯•å°±è¢«å›æ”¶ï¼Œè€Œæ˜¯ä¼šè¢«é—­åŒ…ä¿å­˜ï¼Œé€‚ç”¨äºé«˜é˜¶å‡½æ•°çš„åº”ç”¨åœºæ™¯ã€‚

4. **é—­åŒ…çš„åŠ£åŠ¿**
   - **å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼**ï¼šé—­åŒ…ä¼šæŒæœ‰å¯¹å¤–éƒ¨å˜é‡çš„å¼•ç”¨ï¼Œè‹¥ä¸åˆç†ç®¡ç†ï¼Œå¯èƒ½å¯¼è‡´å†…å­˜æ— æ³•é‡Šæ”¾ã€‚
   - **å¢åŠ ä»£ç å¤æ‚åº¦**ï¼šé—­åŒ…å¯èƒ½å¯¼è‡´ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§é™ä½ï¼Œç‰¹åˆ«æ˜¯åœ¨åµŒå¥—è¾ƒæ·±æ—¶ã€‚
   - **æ‰§è¡Œæ•ˆç‡ä½ä¸‹**ï¼šç”±äºé—­åŒ…éœ€è¦ç»´æŠ¤è¯æ³•ä½œç”¨åŸŸï¼Œä¼šå¢åŠ å†…å­˜å¼€é”€ï¼Œå½±å“æ‰§è¡Œæ€§èƒ½ã€‚

5. **é—­åŒ…çš„æœ¬è´¨**

   é—­åŒ…æœ¬è´¨ä¸Šæ˜¯ **å‡½æ•°åœ¨å…¶è¯æ³•ä½œç”¨åŸŸä¹‹å¤–è¢«è°ƒç”¨ï¼Œä½†ä»ç„¶èƒ½å¤Ÿè®¿é—®å…¶å®šä¹‰æ—¶ä½œç”¨åŸŸçš„å˜é‡**ã€‚

6. **é—­åŒ…çš„å®é™…åº”ç”¨**

   - **åˆ›å»ºç§æœ‰å˜é‡**
   - **åœ¨å¾ªç¯ä¸­æ­£ç¡®æ•è·å˜é‡**
   - **å›è°ƒå‡½æ•°å’Œäº‹ä»¶ç›‘å¬**
   - **æ¨¡æ‹Ÿæ¨¡å—åŒ–ç¼–ç¨‹**
   - **å»¶è¿Ÿæ‰§è¡Œå’ŒèŠ‚æµé˜²æŠ–**

**é—­åŒ…å°±åƒæ˜¯ä» JavaScript ä¸­åˆ†ç¦»å‡ºæ¥çš„ä¸€ä¸ªç‹¬ç«‹çš„å°ä¸–ç•Œï¼Œå……æ»¡ç¥ç§˜æ„Ÿã€‚ä½†å®é™…ä¸Šï¼Œå®ƒåªæ˜¯å‡½æ•°ä½œç”¨åŸŸçš„è‡ªç„¶å»¶ä¼¸ã€‚**

åªè¦ç†è§£äº† **â€œå‡½æ•°å¯ä»¥è®¿é—®åˆ›å»ºæ—¶çš„ä½œç”¨åŸŸâ€** è¿™ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œå°±èƒ½è‡ªå¦‚åœ°ä½¿ç”¨é—­åŒ…ï¼Œé¿å…å¸¸è§é”™è¯¯ï¼Œå¹¶å‘æŒ¥å…¶çœŸæ­£çš„ä¼˜åŠ¿ï¼

# é€’å½’

## ä»€ä¹ˆæ˜¯é€’å½’ï¼Ÿ

**é€’å½’ï¼ˆRecursionï¼‰** æŒ‡çš„æ˜¯ **å‡½æ•°åœ¨è‡ªèº«çš„å®šä¹‰ä¸­è°ƒç”¨è‡ªå·±**ï¼Œé€šå¸¸ç”¨äºè§£å†³ **é‡å¤æ€§ä»»åŠ¡** æˆ– **åµŒå¥—ç»“æ„çš„é—®é¢˜**ã€‚

## é€’å½’çš„æ ¸å¿ƒè¦ç´ 

1. **åŸºå‡†æƒ…å†µï¼ˆBase Caseï¼‰**

   é€’å½’å¿…é¡»æœ‰ **ç»ˆæ­¢æ¡ä»¶**ï¼Œå¦åˆ™ä¼šå¯¼è‡´æ— é™é€’å½’ï¼Œå¼•å‘ **æ ˆæº¢å‡ºï¼ˆStack Overflowï¼‰**ã€‚

2. **é€’å½’æ­¥éª¤ï¼ˆRecursive Caseï¼‰**

   é€’å½’å‡½æ•°åœ¨æ¯æ¬¡è°ƒç”¨æ—¶ï¼Œéƒ½ä¼šå‘ **åŸºå‡†æƒ…å†µ** é€¼è¿‘ï¼Œç¡®ä¿æœ€ç»ˆèƒ½ç»ˆæ­¢ã€‚

3. **çŠ¶æ€å˜åŒ–**

   é€’å½’è°ƒç”¨æ—¶ï¼Œæ¯æ¬¡ **ä¼ é€’ä¸åŒçš„å‚æ•°**ï¼Œé€æ­¥ç¼©å°é—®é¢˜çš„è§„æ¨¡ã€‚

## é€’å½’ç¤ºä¾‹ï¼šé˜¶ä¹˜è®¡ç®—

**è®¡ç®—ï¼š $n! = n Ã— (n-1) Ã— ... Ã— 1$**

```js
function factorial(n) {
  if (n === 0) return 1; // åŸºå‡†æƒ…å†µ
  return n * factorial(n - 1); // é€’å½’è°ƒç”¨
}

console.log(factorial(5)); // è¾“å‡º 120
```

ğŸ“Œ **è§£æ**ï¼š

- factorial(5) = 5 Ã— factorial(4)

- factorial(4) = 4 Ã— factorial(3)
- factorial(3) = 3 Ã— factorial(2)
- actorial(2) = 2 Ã— factorial(1)
- factorial(1) = 1 Ã— factorial(0)
- factorial(0) = 1 ï¼ˆåŸºå‡†æƒ…å†µï¼Œé€’å½’ç»ˆæ­¢ï¼‰

## é€’å½’çš„åº”ç”¨åœºæ™¯

1. **æ•°å­¦è®¡ç®—**ï¼šæ–æ³¢é‚£å¥‘æ•°åˆ—ã€é˜¶ä¹˜ã€å¹‚è¿ç®—ç­‰ã€‚
2. **æ•°æ®è§£æ„**ï¼š
   - éå† **æ ‘å½¢ç»“æ„**ï¼ˆDOM æ ‘ã€JSON æ•°æ®ã€æ–‡ä»¶ç³»ç»Ÿï¼‰ã€‚
   - å¤„ç† **é“¾è¡¨**ï¼ˆåè½¬é“¾è¡¨ã€æŸ¥æ‰¾èŠ‚ç‚¹ç­‰ï¼‰ã€‚
3. **ç®—æ³•é—®é¢˜**ï¼š
   - **åˆ†æ²»æ³•**ï¼ˆäºŒåˆ†æŸ¥æ‰¾ã€å½’å¹¶æ’åºã€å¿«é€Ÿæ’åºï¼‰ã€‚
   - **å›æº¯ç®—æ³•**ï¼ˆè¿·å®«æ±‚è§£ã€å…«çš‡åé—®é¢˜ï¼‰ã€‚
   - **åŠ¨æ€è§„åˆ’**ï¼ˆé€’å½’ + è®°å¿†åŒ–æœç´¢ï¼‰ã€‚

## é€’å½’ä¼˜åŒ–

### å°¾é€’å½’ä¼˜åŒ–ï¼ˆTail Recursionï¼‰

**å°¾é€’å½’** æŒ‡çš„æ˜¯ **é€’å½’è°ƒç”¨æ˜¯å‡½æ•°çš„æœ€åä¸€æ­¥**ï¼Œéƒ¨åˆ† JavaScript å¼•æ“ï¼ˆå¦‚ ES6 çš„éƒ¨åˆ†å®ç°ï¼‰å¯ä»¥å¯¹å…¶è¿›è¡Œ **å°¾è°ƒç”¨ä¼˜åŒ–ï¼ˆTCOï¼‰**ï¼Œå‡å°‘æ ˆçš„å¼€é”€ã€‚

```js
function factorial(n, acc = 1) {
  if (n === 0) return acc;
  return factorial(n - 1, acc * n); // é€’å½’è°ƒç”¨æ˜¯æœ€åä¸€æ­¥
}
console.log(factorial(5)); // è¾“å‡º 120
```

### é€’å½’æ”¹å¾ªç¯ï¼ˆé¿å…æ ˆæº¢å‡ºï¼‰

é€’å½’å‡½æ•°åœ¨ **æ•°æ®é‡è¿‡å¤§** æ—¶ï¼Œå®¹æ˜“å¯¼è‡´ **æ ˆæº¢å‡ºï¼ˆMaximum call stack size exceededï¼‰**ï¼Œå¯ä»¥ä½¿ç”¨ **è¿­ä»£ï¼ˆå¾ªç¯ï¼‰** æ¥ä¼˜åŒ–ï¼š

```js
function factorial(n) {
  let result = 1;
  for (let i = 1; i <= n; i++) {
    result *= i;
  }
  return result;
}
console.log(factorial(5)); // è¾“å‡º 120
```

## é€’å½’ vs è¿­ä»£

| **å¯¹æ¯”é¡¹**     | **é€’å½’**                           | **è¿­ä»£ï¼ˆå¾ªç¯ï¼‰**                      |
| -------------- | ---------------------------------- | ------------------------------------- |
| **ä»£ç ç®€æ´æ€§** | ä»£ç ç®€æ´ï¼Œé€»è¾‘æ¸…æ™°                 | ä»£ç å¯èƒ½æ›´é•¿ï¼Œä½†æ›´é«˜æ•ˆ                |
| **å¯è¯»æ€§**     | é€‚åˆæè¿° **é€’å½’ç»“æ„** çš„é—®é¢˜       | é€‚åˆå¤„ç† **çº¿æ€§é—®é¢˜**                 |
| **æ€§èƒ½**       | å¯èƒ½ä¼šå¯¼è‡´ **æ ˆæº¢å‡º**              | é€šå¸¸æ›´ **é«˜æ•ˆ**ï¼Œä¸ä¼šå ç”¨é¢å¤–çš„æ ˆç©ºé—´ |
| **ç©ºé—´å¤æ‚åº¦** | éœ€è¦ **é€’å½’è°ƒç”¨æ ˆ**ï¼Œä¸€èˆ¬ä¸º `O(n)` | ä»…ä½¿ç”¨ **å°‘é‡å˜é‡**ï¼Œé€šå¸¸ä¸º `O(1)`    |

**é€’å½’æ˜¯ä¸€ç§å¼ºå¤§çš„å·¥å…·**ï¼Œé€‚ç”¨äº **é€’å½’ç»“æ„**ï¼ˆå¦‚æ ‘ã€é“¾è¡¨ã€å›æº¯é—®é¢˜ï¼‰ï¼Œä½†åœ¨å¤„ç†å¤§è§„æ¨¡æ•°æ®æ—¶ï¼Œåº”è¯¥ **è°¨æ…ä½¿ç”¨ï¼Œé¿å…æ ˆæº¢å‡º**ï¼Œå¿…è¦æ—¶ **æ”¹ç”¨è¿­ä»£æˆ–å°¾é€’å½’ä¼˜åŒ–**ã€‚

# æ‹“å±•

## `call()`ã€`bind()`ã€`apply()`

å®ƒä»¬éƒ½æ˜¯ç”¨äºæ”¹å˜å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆ`this`ï¼‰çš„æ–¹æ³•ï¼š

1. `bind(this, ...args)`ï¼šä¿®æ”¹ `this` æŒ‡é’ˆä½†æ˜¯ **ä¸ä¼šç«‹å³æ‰§è¡Œå‡½æ•°**ï¼Œè€Œæ˜¯ **è¿”å›ä¸€ä¸ªæ–°å‡½æ•°**ï¼›

2. `call(this, ...args)`ï¼šä¿®æ”¹ `this` æŒ‡é’ˆå¹¶ **ç«‹å³æ‰§è¡Œå‡½æ•°**ï¼›

3. `apply(this, [..args])`ï¼šä¿®æ”¹ `this` æŒ‡é’ˆå¹¶ **ç«‹å³æ‰§è¡Œå‡½æ•°**ï¼›

```js
var value = 2;
var foo = {
  value: 1,
};
function bar(name, job) {
  return {
    value: this.value,
    name,
    job,
  };
}

var r = bar.call(foo, 'Alice', 'Web Front-end Engineer');
console.log(r); // â†’ { value: 1, name: 'Alice', job: 'Web Front-end Engineer' }

var r = bar.apply(this, ['Alice', 'Web Front-end Engineer']); /** this æŒ‡å‘window, æ‰€ä»¥this.value = 2 */
console.log(r); // â†’ {value: 2, name: 'Alice', job: 'Web Front-end Engineer'}

var func = bar.bind(foo, 'Alice', 'Web Front-end Engineer'); /** è¿”å›æ–°å‡½æ•° */
console.log(func()); // â†’ { value: 1, name: 'Alice', job: 'Web Front-end Engineer' }
```

## å‡½æ•°å£°æ˜ä¸å‡½æ•°è¡¨è¾¾å¼çš„åŒºåˆ«

å‡½æ•°å£°æ˜ä¸å‡½æ•°è¡¨è¾¾å¼æ˜¯åœ¨ js ä¸­å®šä¹‰å‡½æ•°çš„ä¸¤ç§ä¸åŒæ–¹å¼ï¼š

1. å‡½æ•°å£°æ˜é€šè¿‡ä½¿ç”¨ `function` å…³é”®å­—æ¥åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œå¹¶å°†å…¶å‘½åä¸ºä¸€ä¸ªæ ‡è¯†ç¬¦ã€‚è¿™ä¸ªå‡½æ•°å¯ä»¥åœ¨å£°æ˜ä¹‹å‰æˆ–ä¹‹åè¢«è°ƒç”¨ï¼Œå› ä¸ºå‡½æ•°å£°æ˜ä¼šæå‡åˆ°å½“å‰ä½œç”¨åŸŸçš„é¡¶éƒ¨ã€‚
2. å‡½æ•°è¡¨è¾¾å¼åˆ™æ˜¯åœ¨ä¸€ä¸ªè¡¨è¾¾å¼ä¸­å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶å°†å…¶èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ã€‚è¿™ä¸ªå‡½æ•°åªèƒ½åœ¨å…¶å®šä¹‰ä¹‹åè¢«è°ƒç”¨ã€‚

> **Tipsï¼š**éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå‡½æ•°è¡¨è¾¾å¼ä¸­çš„å‡½æ•°æ²¡æœ‰åç§°ï¼Œå®ƒåªæ˜¯è¢«èµ‹å€¼ç»™äº†ä¸€ä¸ªå˜é‡ã€‚å¦‚æœéœ€è¦å¯¹è¯¥å‡½æ•°è¿›è¡Œé€’å½’æˆ–è°ƒè¯•ï¼Œåˆ™å¿…é¡»ä½¿ç”¨è¯¥å˜é‡åè€Œä¸æ˜¯å‡½æ•°åã€‚



